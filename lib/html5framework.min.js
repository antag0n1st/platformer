function Kibo(a){this.element=a||window.document,this.initialize()}function log(a){console.log(a)}function Drawable(){this.initialize()}function SpriteSheet(a){this.initialize(a)}function Sprite(a){a&&this.initialize(a)}function Animation(a){a&&this.initialize(a)}function SpineAnimation(a){a&&this.initialize(a)}function Emitter(a,b,c,d){this.initialize(a,b,c,d)}function Event(){this.initialize()}function Input(){this.initialize()}function StateMachine(a){this.initialize(a)}function Notes(){throw"Can't initialize Notes"}function Bezier(a,b,c,d){this.initialize(a,b,c,d)}function TweenAlpha(a,b,c,d,e){this.initialize(a,b,c,d,e)}function TweenBlink(a,b,c,d,e){this.initialize(a,b,c,d,e)}function TweenMoveTo(a,b,c,d,e){this.initialize(a,b,c,d,e)}function TweenPulsate(a,b,c,d,e){this.initialize(a,b,c,d,e)}function TweenRotate(a,b,c,d,e){this.initialize(a,b,c,d,e)}function TweenRotateBy(a,b,c,d,e){this.initialize(a,b,c,d,e)}function TweenRotateTo(a,b,c,d,e){this.initialize(a,b,c,d,e)}function TweenScale(a,b,c,d,e){this.initialize(a,b,c,d,e)}function TweenShake(a,b,c,d,e){this.initialize(a,b,c,d,e)}function TweenTime(a,b,c,d){this.initialize(a,b,c,d)}function Button(a){this.initialize(a)}function Label(){this.initialize()}function TableView(){this.initialize()}function TableCell(){this.initialize()}var Config=function(){};Config.tile_width=0,Config.tile_height=0,Config.game_width=1600,Config.game_height=920,Config.ratio=0,Config.scale_x=0,Config.scale_y=0,Config.scale_down_x=0,Config.scale_down_y=0,Config.is_mobile=!1,Config.level_tile_width=0,Config.level_tile_height=0,Config.screen_width=0,Config.screen_height=0,Config.remaining_height=0,Config.remaining_width=0,Config.graphics_size=0,Config.height_in_tiles=48,Config.width_in_tiles=80,Config.debug=!0,Config.slow_motion_factor=1,Config.set_screen_size=function(a,b){var c=1;Config.screen_width=a/c,Config.screen_height=b/c;Config.scale_x=1,Config.game_width/Config.screen_width,Config.scale_y=1,Config.scale_x,Config.scale_down_x=1,Config.screen_width/Config.game_width,Config.scale_down_y=1,Config.scale_down_y,Config.tile_width=Config.game_width/Config.width_in_tiles,Config.tile_height=Config.tile_width,Config.game_height=Config.height_in_tiles*Config.tile_height,Config.remaining_height=0,b-Config.game_height,Config.remaining_width=0,a-Config.game_width,Config.x_offset=0,Config.remaining_width,Config.y_offset=0,Config.remaining_height},Config.window_size=function(){var a=window,b="inner";return"innerWidth"in window||(b="client",a=document.documentElement||document.body),{width:a[b+"Width"],height:a[b+"Height"]}},Config.get_querystring=function(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var b="[\\?&]"+a+"=([^&#]*)",c=new RegExp(b),d=c.exec(window.location.search);return null==d?"":decodeURIComponent(d[1].replace(/\+/g," "))},Config.resize=function(){},function(a,b){"function"==typeof define&&define.amd?define(b):"object"==typeof exports?module.exports=b():a.SAT=b()}(this,function(){function a(a,b){this.x=a||0,this.y=b||0}function b(b,c){this.pos=new a,b&&(this.pos.x=b.x,this.pos.y=b.y),this.r=c||0}function c(b,c){this.pos=new a,b&&(this.pos.x=b.x,this.pos.y=b.y),this.points=c||[],this.angle=0,this.offset=new a,this.calcPoints=[],this.edges=[],this.normals=[],this.recalc()}function d(b,c,d){this.pos=new a,b&&(this.pos.x=b.x,this.pos.y=b.y),this.w=c||0,this.h=d||0}function e(){this.a=null,this.b=null,this.overlapN=new a,this.overlapV=new a,this.clear()}function f(a,b,c){for(var d=Number.MAX_VALUE,e=-Number.MAX_VALUE,f=a.length,g=0;f>g;g++){var h=a[g].dot(b);d>h&&(d=h),h>e&&(e=h)}c[0]=d,c[1]=e}function g(a,b,c,d,e,g){var h=s.pop(),i=s.pop(),j=q.pop().copy(b).sub(a),k=j.dot(e);if(f(c,e,h),f(d,e,i),i[0]+=k,i[1]+=k,h[0]>i[1]||i[0]>h[1])return q.push(j),s.push(h),s.push(i),!0;if(g){var l=0;if(h[0]<i[0])if(g.aInB=!1,h[1]<i[1])l=h[1]-i[0],g.bInA=!1;else{var m=h[1]-i[0],n=i[1]-h[0];l=n>m?m:-n}else if(g.bInA=!1,h[1]>i[1])l=h[0]-i[1],g.aInB=!1;else{var m=h[1]-i[0],n=i[1]-h[0];l=n>m?m:-n}var o=Math.abs(l);o<g.overlap&&(g.overlap=o,g.overlapN.copy(e),0>l&&g.overlapN.reverse())}return q.push(j),s.push(h),s.push(i),!1}function h(a,b){var c=a.len2(),d=b.dot(a);return 0>d?v:d>c?x:w}function i(a,b){var c=q.pop().copy(a).sub(b.pos),d=b.r*b.r,e=c.len2();return q.push(c),d>=e}function j(a,b){u.pos.copy(a),t.clear();var c=n(u,b,t);return c&&(c=t.aInB),c}function k(a,b,c){var d=q.pop().copy(b.pos).sub(a.pos),e=a.r+b.r,f=e*e,g=d.len2();if(g>f)return q.push(d),!1;if(c){var h=Math.sqrt(g);c.a=a,c.b=b,c.overlap=e-h,c.overlapN.copy(d.normalize()),c.overlapV.copy(d).scale(c.overlap),c.aInB=a.r<=b.r&&h<=b.r-a.r,c.bInA=b.r<=a.r&&h<=a.r-b.r}return q.push(d),!0}function l(a,b,c){for(var d=q.pop().copy(b.pos).sub(a.pos),e=b.r,f=e*e,g=a.calcPoints,i=g.length,j=q.pop(),k=q.pop(),l=0;i>l;l++){var m=l===i-1?0:l+1,n=0===l?i-1:l-1,o=0,p=null;j.copy(a.edges[l]),k.copy(d).sub(g[l]),c&&k.len2()>f&&(c.aInB=!1);var r=h(j,k);if(r===v){j.copy(a.edges[n]);var s=q.pop().copy(d).sub(g[n]);if(r=h(j,s),r===x){var t=k.len();if(t>e)return q.push(d),q.push(j),q.push(k),q.push(s),!1;c&&(c.bInA=!1,p=k.normalize(),o=e-t)}q.push(s)}else if(r===x){if(j.copy(a.edges[m]),k.copy(d).sub(g[m]),r=h(j,k),r===v){var t=k.len();if(t>e)return q.push(d),q.push(j),q.push(k),!1;c&&(c.bInA=!1,p=k.normalize(),o=e-t)}}else{var u=j.perp().normalize(),t=k.dot(u),w=Math.abs(t);if(t>0&&w>e)return q.push(d),q.push(u),q.push(k),!1;c&&(p=u,o=e-t,(t>=0||2*e>o)&&(c.bInA=!1))}p&&c&&Math.abs(o)<Math.abs(c.overlap)&&(c.overlap=o,c.overlapN.copy(p))}return c&&(c.a=a,c.b=b,c.overlapV.copy(c.overlapN).scale(c.overlap)),q.push(d),q.push(j),q.push(k),!0}function m(a,b,c){var d=l(b,a,c);if(d&&c){var e=c.a,f=c.aInB;c.overlapN.reverse(),c.overlapV.reverse(),c.a=c.b,c.b=e,c.aInB=c.bInA,c.bInA=f}return d}function n(a,b,c){for(var d=a.calcPoints,e=d.length,f=b.calcPoints,h=f.length,i=0;e>i;i++)if(g(a.pos,b.pos,d,f,a.normals[i],c))return!1;for(var i=0;h>i;i++)if(g(a.pos,b.pos,d,f,b.normals[i],c))return!1;return c&&(c.a=a,c.b=b,c.overlapV.copy(c.overlapN).scale(c.overlap)),!0}var o={},p=function(){this.objects=[],this.count=0,this.index=0};p.prototype.get=function(){return this.index>=this.count&&(this.objects.push(new a(0,0)),this.count++),this.objects[this.index++]},p.prototype.reset=function(){this.index=0},o.pool=new p,o.Vector=a,o.V=a,a.prototype.copy=a.prototype.copy=function(a){return this.x=a.x,this.y=a.y,this},a.prototype.clone=a.prototype.clone=function(){var a=o.pool.get();return a.x=this.x,a.y=this.y,a},a.prototype.perp=a.prototype.perp=function(){var a=this.x;return this.x=this.y,this.y=-a,this},a.prototype.rotate=a.prototype.rotate=function(a){var b=this.x,c=this.y;return this.x=b*Math.cos(a)-c*Math.sin(a),this.y=b*Math.sin(a)+c*Math.cos(a),this},a.prototype.reverse=a.prototype.reverse=function(){return this.x=-this.x,this.y=-this.y,this},a.prototype.normalize=a.prototype.normalize=function(){var a=this.len();return a>0&&(this.x=this.x/a,this.y=this.y/a),this},a.prototype.add=a.prototype.add=function(a){return this.x+=a.x,this.y+=a.y,this},a.prototype.sub=a.prototype.sub=function(a){return this.x-=a.x,this.y-=a.y,this},a.prototype.scale=a.prototype.scale=function(a,b){return this.x*=a,this.y*=b||a,this},a.prototype.project=a.prototype.project=function(a){var b=this.dot(a)/a.len2();return this.x=b*a.x,this.y=b*a.y,this},a.prototype.projectN=a.prototype.projectN=function(a){var b=this.dot(a);return this.x=b*a.x,this.y=b*a.y,this},a.prototype.reflect=a.prototype.reflect=function(a){var b=this.x,c=this.y;return this.project(a).scale(2),this.x-=b,this.y-=c,this},a.prototype.reflectN=a.prototype.reflectN=function(a){var b=this.x,c=this.y;return this.projectN(a).scale(2),this.x-=b,this.y-=c,this},a.prototype.dot=a.prototype.dot=function(a){return this.x*a.x+this.y*a.y},a.prototype.len2=a.prototype.len2=function(){return this.dot(this)},a.prototype.len=a.prototype.len=function(){return Math.sqrt(this.len2())},a.prototype.setLength=a.prototype.setLength=function(a){var b=this.getAngle();this.x=Math.cos(b)*a,this.y=Math.sin(b)*a},a.prototype.setX=a.prototype.setX=function(a){return this.x=a,this},a.prototype.setY=a.prototype.setY=function(a){return this.y=a,this},a.prototype.setAngle=a.prototype.setAngle=function(a){var b=this.len();return this.x=Math.cos(a)*b,this.y=Math.sin(a)*b,this},a.prototype.getAngle=a.prototype.getAngle=function(){return Math.atan2(this.y,this.x)},a.addition=function(b,c){return new a(b.x+c.x,b.y+c.y)},a.substruction=function(b,c){return new a(b.x-c.x,b.y-c.y)},o.Circle=b,o.Polygon=c,c.prototype.setPoints=c.prototype.setPoints=function(a){return this.points=a,this.recalc(),this},c.prototype.setAngle=c.prototype.setAngle=function(a){return this.angle=a,this.recalc(),this},c.prototype.setOffset=c.prototype.setOffset=function(a){return this.offset=a,this.recalc(),this},c.prototype.rotate=c.prototype.rotate=function(a){for(var b=this.points,c=b.length,d=0;c>d;d++)b[d].rotate(a);return this.recalc(),this},c.prototype.translate=c.prototype.translate=function(a,b){for(var c=this.points,d=c.length,e=0;d>e;e++)c[e].x+=a,c[e].y+=b;return this.recalc(),this},c.prototype.recalc=c.prototype.recalc=function(){var b,c=this.calcPoints,d=this.edges,e=this.normals,f=this.points,g=this.offset,h=this.angle;if(0===c.length){var i=f.length;for(b=0;i>b;b++){var j=(new a).copy(f[b]);c.push(j),j.x+=g.x,j.y+=g.y,0!==h&&j.rotate(h)}for(b=0;i>b;b++){var k=c[b],l=i-1>b?c[b+1]:c[0],m=(new a).copy(l).sub(k),n=(new a).copy(m).perp().normalize();d.push(m),e.push(n)}}else{var i=f.length;for(b=0;i>b;b++){var j=c[b].copy(f[b]);j.x+=g.x,j.y+=g.y,0!==h&&j.rotate(h)}for(b=0;i>b;b++){var k=c[b],l=i-1>b?c[b+1]:c[0];d[b].copy(l).sub(k),e[b].copy(d[b]).perp().normalize()}}return this},o.Box=d,d.prototype.toPolygon=d.prototype.toPolygon=function(){var b=this.pos,d=this.w,e=this.h;return new c(new a(b.x,b.y),[new a,new a(d,0),new a(d,e),new a(0,e)])},o.Response=e,e.prototype.clear=e.prototype.clear=function(){return this.aInB=!0,this.bInA=!0,this.overlap=Number.MAX_VALUE,this};for(var q=[],r=0;10>r;r++)q.push(new a);for(var s=[],r=0;5>r;r++)s.push([]);var t=new e,u=new d(new a,1,1).toPolygon(),v=-1,w=0,x=1;return o.pointInCircle=i,o.pointInPolygon=j,o.testCircleCircle=k,o.testPolygonCircle=l,o.testCirclePolygon=m,o.testPolygonPolygon=n,o}),V=Vector=SAT.Vector,Box=SAT.Box,Polygon=SAT.Polygon,Response=SAT.Response,Circle=SAT.Circle,Kibo.KEY_NAMES_BY_CODE={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"caps_lock",27:"esc",32:"space",33:"page_up",34:"page_down",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"num_lock"},Kibo.KEY_CODES_BY_NAME={},function(){for(var a in Kibo.KEY_NAMES_BY_CODE)Object.prototype.hasOwnProperty.call(Kibo.KEY_NAMES_BY_CODE,a)&&(Kibo.KEY_CODES_BY_NAME[Kibo.KEY_NAMES_BY_CODE[a]]=+a)}(),Kibo.MODIFIERS=["shift","ctrl","alt"],Kibo.WILDCARD_TYPES=["arrow","number","letter","f"],Kibo.WILDCARDS={arrow:[37,38,39,40],number:[48,49,50,51,52,53,54,55,56,57],letter:[65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90],f:[112,113,114,115,116,117,118,119,120,121,122,123]},Kibo.assert=function(a,b){b=b||{},b.name=b.name||"Exception raised",b.message=b.message||"an error has occurred.";try{if(!a)throw b}catch(c){"undefined"!=typeof console&&console.log?console.log(c.name+": "+c.message):window.alert(c.name+": "+c.message)}},Kibo.registerEvent=function(){return document.addEventListener?function(a,b,c){a.addEventListener(b,c,!1)}:document.attachEvent?function(a,b,c){a.attachEvent("on"+b,c)}:void 0}(),Kibo.unregisterEvent=function(){return document.removeEventListener?function(a,b,c){a.removeEventListener(b,c,!1)}:document.detachEvent?function(a,b,c){a.detachEvent("on"+b,c)}:void 0}(),Kibo.isArray=function(a){return!(!a||!a.splice)},Kibo.isString=function(a){return"string"==typeof a},Kibo.arrayIncludes=function(){return Array.prototype.indexOf?function(a,b){return-1!==a.indexOf(b)}:function(a,b){for(var c=0;c<a.length;c++)if(a[c]===b)return!0;return!1}}(),Kibo.trimString=function(a){return a.replace(/^\s+|\s+$/g,"")},Kibo.neatString=function(a){return Kibo.trimString(a).replace(/\s+/g," ")},Kibo.capitalize=function(a){return a.toLowerCase().replace(/^./,function(a){return a.toUpperCase()})},Kibo.isModifier=function(a){return Kibo.arrayIncludes(Kibo.MODIFIERS,a)},Kibo.prototype.initialize=function(){var a,b=this;for(this.lastKeyCode=-1,this.lastModifiers={},a=0;a<Kibo.MODIFIERS.length;a++)this.lastModifiers[Kibo.MODIFIERS[a]]=!1;for(this.keysDown={any:[]},this.keysUp={any:[]},a=0;a<Kibo.WILDCARD_TYPES.length;a++)this.keysDown["any "+Kibo.WILDCARD_TYPES[a]]=[],this.keysUp["any "+Kibo.WILDCARD_TYPES[a]]=[];this.downHandler=this.handler("down"),this.upHandler=this.handler("up"),Kibo.registerEvent(this.element,"keydown",this.downHandler),Kibo.registerEvent(this.element,"keyup",this.upHandler),Kibo.registerEvent(window,"unload",function c(){Kibo.unregisterEvent(b.element,"keydown",b.downHandler),Kibo.unregisterEvent(b.element,"keyup",b.upHandler),Kibo.unregisterEvent(window,"unload",c)})},Kibo.prototype.matchingKeys=function(a){var b,c,d,e=[];for(var f in a)if(Object.prototype.hasOwnProperty.call(a,f)&&(c=Kibo.trimString(f).split(" "),c.length&&"any"!==c[0])){for(d=!0,b=0;b<c.length;b++)d=d&&(Kibo.isModifier(c[b])?this.lastKey(c[b]):this.lastKey()===c[b]);d&&e.push(f)}return e},Kibo.prototype.handler=function(a){var b=this;return function(c){var d,e,f,g;for(c=c||window.event,b.lastKeyCode=c.keyCode,d=0;d<Kibo.MODIFIERS.length;d++)b.lastModifiers[Kibo.MODIFIERS[d]]=c[Kibo.MODIFIERS[d]+"Key"];for(Kibo.arrayIncludes(Kibo.MODIFIERS,Kibo.keyName(b.lastKeyCode))&&(b.lastModifiers[Kibo.keyName(b.lastKeyCode)]=!0),g=b["keys"+Kibo.capitalize(a)],f=b.matchingKeys(g),d=0;d<g.any.length;d++)g.any[d](c)===!1&&c.preventDefault&&c.preventDefault();for(d=0;d<Kibo.WILDCARD_TYPES.length;d++)if(Kibo.arrayIncludes(Kibo.WILDCARDS[Kibo.WILDCARD_TYPES[d]],b.lastKeyCode))for(e=0;e<g["any "+Kibo.WILDCARD_TYPES[d]].length;e++)g["any "+Kibo.WILDCARD_TYPES[d]][e](c)===!1&&c.preventDefault&&c.preventDefault();for(d=0;d<f.length;d++)for(e=0;e<g[f[d]].length;e++)g[f[d]][e](c)===!1&&c.preventDefault&&c.preventDefault()}},Kibo.prototype.registerKeys=function(a,b,c){var d,e=this["keys"+Kibo.capitalize(a)];for(Kibo.isArray(b)||(b=[b]),d=0;d<b.length;d++)Kibo.assert(Kibo.isString(b[d]),{name:"Type error",message:"expected string or array of strings."}),b[d]=Kibo.neatString(b[d]),Kibo.isArray(e[b[d]])?e[b[d]].push(c):e[b[d]]=[c];return this},Kibo.prototype.unregisterKeys=function(a,b,c){var d,e,f=this["keys"+Kibo.capitalize(a)];for(Kibo.isArray(b)||(b=[b]),d=0;d<b.length;d++)if(Kibo.assert(Kibo.isString(b[d]),{name:"Type error",message:"expected string or array of strings."}),b[d]=Kibo.neatString(b[d]),null===c)delete f[b[d]];else if(Kibo.isArray(f[b[d]]))for(e=0;e<f[b[d]].length;e++)if(String(f[b[d]][e])===String(c)){f[b[d]].splice(e,1);break}return this},Kibo.prototype.delegate=function(a,b,c){return null!==c?this.registerKeys(a,b,c):this.unregisterKeys(a,b,c)},Kibo.prototype.down=function(a,b){return this.delegate("down",a,b)},Kibo.prototype.up=function(a,b){return this.delegate("up",a,b)},Kibo.keyName=function(a){return Kibo.KEY_NAMES_BY_CODE[a+""]},Kibo.keyCode=function(a){return+Kibo.KEY_CODES_BY_NAME[a]},Kibo.prototype.lastKey=function(a){return a?(Kibo.assert(Kibo.arrayIncludes(Kibo.MODIFIERS,a),{name:"Modifier error",message:"invalid modifier "+a+" (valid modifiers are: "+Kibo.MODIFIERS.join(", ")+")."}),this.lastModifiers[a]):Kibo.keyName(this.lastKeyCode)},window.Kibo=Kibo,function(){var a={},b=null,c=!0,d=!1;try{"undefined"!=typeof AudioContext?b=new AudioContext:"undefined"!=typeof webkitAudioContext?b=new webkitAudioContext:c=!1}catch(e){c=!1}if(!c)if("undefined"!=typeof Audio)try{new Audio}catch(e){d=!0}else d=!0;if(c){var f="undefined"==typeof b.createGain?b.createGainNode():b.createGain();f.gain.value=1,f.connect(b.destination)}var g=function(){this._volume=1,this._muted=!1,this.usingWebAudio=c,this.noAudio=d,this._howls=[]};g.prototype={volume:function(a){var b=this;if(a=parseFloat(a),a>=0&&1>=a){b._volume=a,c&&(f.gain.value=a);for(var d in b._howls)if(b._howls.hasOwnProperty(d)&&b._howls[d]._webAudio===!1)for(var e=0;e<b._howls[d]._audioNode.length;e++)b._howls[d]._audioNode[e].volume=b._howls[d]._volume*b._volume;return b}return c?f.gain.value:b._volume},mute:function(){return this._setMuted(!0),this},unmute:function(){return this._setMuted(!1),this},_setMuted:function(a){var b=this;b._muted=a,c&&(f.gain.value=a?0:b._volume);for(var d in b._howls)if(b._howls.hasOwnProperty(d)&&b._howls[d]._webAudio===!1)for(var e=0;e<b._howls[d]._audioNode.length;e++)b._howls[d]._audioNode[e].muted=a}};var h=new g,i=null;if(!d){i=new Audio;var j={mp3:!!i.canPlayType("audio/mpeg;").replace(/^no$/,""),opus:!!i.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!i.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!i.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),m4a:!!(i.canPlayType("audio/x-m4a;")||i.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(i.canPlayType("audio/x-mp4;")||i.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!i.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")}}var k=function(a){var b=this;b._autoplay=a.autoplay||!1,b._buffer=a.buffer||!1,b._duration=a.duration||0,b._format=a.format||null,b._loop=a.loop||!1,b._loaded=!1,b._sprite=a.sprite||{},b._src=a.src||"",b._pos3d=a.pos3d||[0,0,-.5],b._volume=void 0!==a.volume?a.volume:1,b._urls=a.urls||[],b._rate=a.rate||1,b._onload=[a.onload||function(){}],b._onloaderror=[a.onloaderror||function(){}],b._onend=[a.onend||function(){}],b._onpause=[a.onpause||function(){}],b._onplay=[a.onplay||function(){}],b._onendTimer=[],b._webAudio=c&&!b._buffer,b._audioNode=[],b._webAudio&&b._setupAudioNode(),h._howls.push(b),b.load()};if(k.prototype={load:function(){var b=this,c=null;if(d)return void b.on("loaderror");for(var e=0;e<b._urls.length;e++){var f,i;if(b._format)f=b._format;else{if(i=b._urls[e].toLowerCase().split("?")[0],f=i.match(/.+\.([^?]+)(\?|$)/),f=f&&f.length>=2?f:i.match(/data\:audio\/([^?]+);/),!f)return void b.on("loaderror");f=f[1]}if(j[f]){c=b._urls[e];break}}if(!c)return void b.on("loaderror");if(b._src=c,b._webAudio)l(b,c);else{var k=new Audio;k.addEventListener("error",function(){k.error&&4===k.error.code&&(g.noAudio=!0),b.on("loaderror",{type:k.error.code})},!1),b._audioNode.push(k),k.src=c,k._pos=0,k.preload="auto",k.volume=h._muted?0:b._volume*h.volume(),a[c]=b;var m=function(){b._duration=Math.ceil(10*k.duration)/10,0===Object.getOwnPropertyNames(b._sprite).length&&(b._sprite={_default:[0,1e3*b._duration]}),b._loaded||(b._loaded=!0,b.on("load")),b._autoplay&&b.play(),k.removeEventListener("canplaythrough",m,!1)};k.addEventListener("canplaythrough",m,!1),k.load()}return b},urls:function(a){var b=this;return a?(b.stop(),b._urls="string"==typeof a?[a]:a,b._loaded=!1,b.load(),b):b._urls},play:function(a,c){var d=this;return"function"==typeof a&&(c=a),a&&"function"!=typeof a||(a="_default"),d._loaded?d._sprite[a]?(d._inactiveNode(function(e){e._sprite=a;var f,g=e._pos>0?e._pos:d._sprite[a][0]/1e3,i=d._sprite[a][1]/1e3-e._pos,j=!(!d._loop&&!d._sprite[a][2]),k="string"==typeof c?c:Math.round(Date.now()*Math.random())+"";if(function(){var b={id:k,sprite:a,loop:j};f=setTimeout(function(){!d._webAudio&&j&&d.stop(b.id,b.timer).play(a,b.id),d._webAudio&&!j&&(d._nodeById(b.id).paused=!0,d._nodeById(b.id)._pos=0),d._webAudio||j||d.stop(b.id,b.timer),d.on("end",k)},1e3*i),d._onendTimer.push(f),b.timer=d._onendTimer[d._onendTimer.length-1]}(),d._webAudio){var l=d._sprite[a][0]/1e3,m=d._sprite[a][1]/1e3;e.id=k,e.paused=!1,n(d,[j,l,m],k),d._playStart=b.currentTime,e.gain.value=d._volume,"undefined"==typeof e.bufferSource.start?e.bufferSource.noteGrainOn(0,g,i):e.bufferSource.start(0,g,i)}else{if(4!==e.readyState)return d._clearEndTimer(f),function(){var b=d,f=a,g=c,h=e,i=function(){b.play(f,g),h.removeEventListener("canplaythrough",i,!1)};h.addEventListener("canplaythrough",i,!1)}(),d;e.id=k,e.currentTime=g,e.muted=h._muted||e.muted,e.volume=d._volume*h.volume(),setTimeout(function(){e.play()},0)}return d.on("play"),"function"==typeof c&&c(k),d}),d):("function"==typeof c&&c(),d):(d.on("load",function(){d.play(a,c)}),d)},pause:function(a,b){var c=this;if(!c._loaded)return c.on("play",function(){c.pause(a)}),c;c._clearEndTimer(b||0);var d=a?c._nodeById(a):c._activeNode();if(d)if(d._pos=c.pos(null,a),c._webAudio){if(!d.bufferSource||d.paused)return c;d.paused=!0,"undefined"==typeof d.bufferSource.stop?d.bufferSource.noteOff(0):d.bufferSource.stop(0)}else d.pause();return c.on("pause"),c},stop:function(a,b){var c=this;if(!c._loaded)return c.on("play",function(){c.stop(a)}),c;c._clearEndTimer(b||0);var d=a?c._nodeById(a):c._activeNode();if(d)if(d._pos=0,c._webAudio){if(!d.bufferSource||d.paused)return c;d.paused=!0,"undefined"==typeof d.bufferSource.stop?d.bufferSource.noteOff(0):d.bufferSource.stop(0)}else d.pause(),d.currentTime=0;return c},mute:function(a){var b=this;if(!b._loaded)return b.on("play",function(){b.mute(a)}),b;var c=a?b._nodeById(a):b._activeNode();return c&&(b._webAudio?c.gain.value=0:c.muted=!0),b},unmute:function(a){var b=this;if(!b._loaded)return b.on("play",function(){b.unmute(a)}),b;var c=a?b._nodeById(a):b._activeNode();return c&&(b._webAudio?c.gain.value=b._volume:c.muted=!1),b},volume:function(a,b){var c=this;if(a=parseFloat(a),a>=0&&1>=a){if(c._volume=a,!c._loaded)return c.on("play",function(){c.volume(a,b)}),c;var d=b?c._nodeById(b):c._activeNode();return d&&(c._webAudio?d.gain.value=a:d.volume=a*h.volume()),c}return c._volume},loop:function(a){var b=this;return"boolean"==typeof a?(b._loop=a,b):b._loop},sprite:function(a){var b=this;return"object"==typeof a?(b._sprite=a,b):b._sprite},pos:function(a,c){var d=this;if(!d._loaded)return d.on("load",function(){d.pos(a)}),"number"==typeof a?d:d._pos||0;a=parseFloat(a);var e=c?d._nodeById(c):d._activeNode();if(e)return a>=0?(d.pause(c),e._pos=a,d.play(e._sprite,c),d):d._webAudio?e._pos+(b.currentTime-d._playStart):e.currentTime;if(a>=0)return d;for(var f=0;f<d._audioNode.length;f++)if(d._audioNode[f].paused&&4===d._audioNode[f].readyState)return d._webAudio?d._audioNode[f]._pos:d._audioNode[f].currentTime},pos3d:function(a,b,c,d){var e=this;if(b="undefined"!=typeof b&&b?b:0,c="undefined"!=typeof c&&c?c:-.5,!e._loaded)return e.on("play",function(){e.pos3d(a,b,c,d)}),e;if(!(a>=0||0>a))return e._pos3d;if(e._webAudio){var f=d?e._nodeById(d):e._activeNode();f&&(e._pos3d=[a,b,c],f.panner.setPosition(a,b,c))}return e},fade:function(a,b,c,d,e){var f=this,g=Math.abs(a-b),h=a>b?"down":"up",i=g/.01,j=c/i;if(!f._loaded)return f.on("load",function(){f.fade(a,b,c,d,e)}),f;f.volume(a,e);for(var k=1;i>=k;k++)!function(){var a=f._volume+("up"===h?.01:-.01)*k,c=Math.round(1e3*a)/1e3,g=b;setTimeout(function(){f.volume(c,e),c===g&&d&&d()},j*k)}()},fadeIn:function(a,b,c){return this.volume(0).play().fade(0,a,b,c)},fadeOut:function(a,b,c,d){var e=this;return e.fade(e._volume,a,b,function(){c&&c(),e.pause(d),e.on("end")},d)},_nodeById:function(a){for(var b=this,c=b._audioNode[0],d=0;d<b._audioNode.length;d++)if(b._audioNode[d].id===a){c=b._audioNode[d];break}return c},_activeNode:function(){for(var a=this,b=null,c=0;c<a._audioNode.length;c++)if(!a._audioNode[c].paused){b=a._audioNode[c];break}return a._drainPool(),b},_inactiveNode:function(a){for(var b=this,c=null,d=0;d<b._audioNode.length;d++)if(b._audioNode[d].paused&&4===b._audioNode[d].readyState){a(b._audioNode[d]),c=!0;break}if(b._drainPool(),!c){var e;b._webAudio?(e=b._setupAudioNode(),a(e)):(b.load(),e=b._audioNode[b._audioNode.length-1],e.addEventListener("loadedmetadata",function(){a(e)}))}},_drainPool:function(){var a,b=this,c=0;for(a=0;a<b._audioNode.length;a++)b._audioNode[a].paused&&c++;for(a=b._audioNode.length-1;a>=0&&!(5>=c);a--)b._audioNode[a].paused&&(b._webAudio&&b._audioNode[a].disconnect(0),c--,b._audioNode.splice(a,1))},_clearEndTimer:function(a){var b=this,c=b._onendTimer.indexOf(a);c=c>=0?c:0,b._onendTimer[c]&&(clearTimeout(b._onendTimer[c]),b._onendTimer.splice(c,1))},_setupAudioNode:function(){var a=this,c=a._audioNode,d=a._audioNode.length;return c[d]="undefined"==typeof b.createGain?b.createGainNode():b.createGain(),c[d].gain.value=a._volume,c[d].paused=!0,c[d]._pos=0,c[d].readyState=4,c[d].connect(f),c[d].panner=b.createPanner(),c[d].panner.setPosition(a._pos3d[0],a._pos3d[1],a._pos3d[2]),c[d].panner.connect(c[d]),c[d]},on:function(a,b){var c=this,d=c["_on"+a];if("function"==typeof b)d.push(b);else for(var e=0;e<d.length;e++)b?d[e].call(c,b):d[e].call(c);return c},off:function(a,b){for(var c=this,d=c["_on"+a],e=b.toString(),f=0;f<d.length;f++)if(e===d[f].toString()){d.splice(f,1);break}return c},unload:function(){for(var b=this,c=b._audioNode,d=0;d<b._audioNode.length;d++)c[d].paused||b.stop(c[d].id),b._webAudio?c[d].disconnect(0):c[d].src="";var e=h._howls.indexOf(b);null!==e&&e>=0&&h._howls.splice(e,1),delete a[b._src],b=null}},c)var l=function(c,d){if(d in a)c._duration=a[d].duration,m(c);else{var e=new XMLHttpRequest;e.open("GET",d,!0),e.responseType="arraybuffer",e.onload=function(){b.decodeAudioData(e.response,function(b){b&&(a[d]=b,m(c,b))},function(){c.on("loaderror")})},e.onerror=function(){c._webAudio&&(c._buffer=!0,c._webAudio=!1,c._audioNode=[],delete c._gainNode,c.load())};try{e.send()}catch(f){e.onerror()}}},m=function(a,b){a._duration=b?b.duration:a._duration,0===Object.getOwnPropertyNames(a._sprite).length&&(a._sprite={_default:[0,1e3*a._duration]}),a._loaded||(a._loaded=!0,a.on("load")),a._autoplay&&a.play()},n=function(c,d,e){var f=c._nodeById(e);f.bufferSource=b.createBufferSource(),f.bufferSource.buffer=a[c._src],f.bufferSource.connect(f.panner),f.bufferSource.loop=d[0],d[0]&&(f.bufferSource.loopStart=d[1],f.bufferSource.loopEnd=d[1]+d[2]),f.bufferSource.playbackRate.value=c._rate};"function"==typeof define&&define.amd&&define(function(){return{Howler:h,Howl:k}}),"undefined"!=typeof exports&&(exports.Howler=h,exports.Howl=k),window.Howler=h,window.Howl=k}();var spine={};spine.BoneData=function(a,b){this.name=a,this.parent=b},spine.BoneData.prototype={length:0,x:0,y:0,rotation:0,scaleX:1,scaleY:1,inheritScale:!0,inheritRotation:!0},spine.SlotData=function(a,b){this.name=a,this.boneData=b},spine.SlotData.prototype={r:1,g:1,b:1,a:1,attachmentName:null,additiveBlending:!1},spine.Bone=function(a,b){this.data=a,this.parent=b,this.setToSetupPose()},spine.Bone.yDown=!1,spine.Bone.prototype={x:0,y:0,rotation:0,scaleX:1,scaleY:1,m00:0,m01:0,worldX:0,m10:0,m11:0,worldY:0,worldRotation:0,worldScaleX:1,worldScaleY:1,updateWorldTransform:function(a,b){var c=this.parent;null!=c?(this.worldX=this.x*c.m00+this.y*c.m01+c.worldX,this.worldY=this.x*c.m10+this.y*c.m11+c.worldY,this.data.inheritScale?(this.worldScaleX=c.worldScaleX*this.scaleX,this.worldScaleY=c.worldScaleY*this.scaleY):(this.worldScaleX=this.scaleX,this.worldScaleY=this.scaleY),this.worldRotation=this.data.inheritRotation?c.worldRotation+this.rotation:this.rotation):(this.worldX=a?-this.x:this.x,this.worldY=b!=spine.Bone.yDown?-this.y:this.y,this.worldScaleX=this.scaleX,this.worldScaleY=this.scaleY,this.worldRotation=this.rotation);var d=this.worldRotation*Math.PI/180,e=Math.cos(d),f=Math.sin(d);this.m00=e*this.worldScaleX,this.m10=f*this.worldScaleX,this.m01=-f*this.worldScaleY,this.m11=e*this.worldScaleY,a&&(this.m00=-this.m00,this.m01=-this.m01),b!=spine.Bone.yDown&&(this.m10=-this.m10,this.m11=-this.m11)},setToSetupPose:function(){var a=this.data;this.x=a.x,this.y=a.y,this.rotation=a.rotation,this.scaleX=a.scaleX,this.scaleY=a.scaleY}},spine.Slot=function(a,b,c){this.data=a,this.skeleton=b,this.bone=c,this.setToSetupPose()},spine.Slot.prototype={r:1,g:1,b:1,a:1,_attachmentTime:0,attachment:null,attachmentVertices:[],setAttachment:function(a){this.attachment=a,this._attachmentTime=this.skeleton.time,this.attachmentVertices.length=0},setAttachmentTime:function(a){this._attachmentTime=this.skeleton.time-a},getAttachmentTime:function(){return this.skeleton.time-this._attachmentTime},setToSetupPose:function(){var a=this.data;this.r=a.r,this.g=a.g,this.b=a.b,this.a=a.a;for(var b=this.skeleton.data.slots,c=0,d=b.length;d>c;c++)if(b[c]==a){this.setAttachment(a.attachmentName?this.skeleton.getAttachmentBySlotIndex(c,a.attachmentName):null);break}}},spine.Skin=function(a){this.name=a,this.attachments={}},spine.Skin.prototype={addAttachment:function(a,b,c){this.attachments[a+":"+b]=c},getAttachment:function(a,b){return this.attachments[a+":"+b]},_attachAll:function(a,b){for(var c in b.attachments){var d=c.indexOf(":"),e=parseInt(c.substring(0,d)),f=c.substring(d+1),g=a.slots[e];if(g.attachment&&g.attachment.name==f){var h=this.getAttachment(e,f);h&&g.setAttachment(h)}}}},spine.Animation=function(a,b,c){this.name=a,this.timelines=b,this.duration=c},spine.Animation.prototype={apply:function(a,b,c,d,e){d&&0!=this.duration&&(c%=this.duration,b%=this.duration);for(var f=this.timelines,g=0,h=f.length;h>g;g++)f[g].apply(a,b,c,e,1)},mix:function(a,b,c,d,e,f){d&&0!=this.duration&&(c%=this.duration,b%=this.duration);for(var g=this.timelines,h=0,i=g.length;i>h;h++)g[h].apply(a,b,c,e,f)}},spine.binarySearch=function(a,b,c){var d=0,e=Math.floor(a.length/c)-2;if(0==e)return c;for(var f=e>>>1;;){if(a[(f+1)*c]<=b?d=f+1:e=f,d==e)return(d+1)*c;f=d+e>>>1}},spine.linearSearch=function(a,b,c){for(var d=0,e=a.length-c;e>=d;d+=c)if(a[d]>b)return d;return-1},spine.Curves=function(a){this.curves=[],this.curves.length=6*(a-1)},spine.Curves.prototype={setLinear:function(a){this.curves[6*a]=0},setStepped:function(a){this.curves[6*a]=-1},setCurve:function(a,b,c,d,e){var f=.1,g=f*f,h=g*f,i=3*f,j=3*g,k=6*g,l=6*h,m=2*-b+d,n=2*-c+e,o=3*(b-d)+1,p=3*(c-e)+1,q=6*a,r=this.curves;r[q]=b*i+m*j+o*h,r[q+1]=c*i+n*j+p*h,r[q+2]=m*k+o*l,r[q+3]=n*k+p*l,r[q+4]=o*l,r[q+5]=p*l},getCurvePercent:function(a,b){b=0>b?0:b>1?1:b;var c=6*a,d=this.curves,e=d[c];if(!e)return b;if(-1==e)return 0;for(var f=d[c+1],g=d[c+2],h=d[c+3],i=d[c+4],j=d[c+5],k=e,l=f,m=8;;){if(k>=b){var n=k-e,o=l-f;return o+(l-o)*(b-n)/(k-n)}if(0==m)break;m--,e+=g,f+=h,g+=i,h+=j,k+=e,l+=f}return l+(1-l)*(b-k)/(1-k)}},spine.RotateTimeline=function(a){this.curves=new spine.Curves(a),this.frames=[],this.frames.length=2*a},spine.RotateTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/2},setFrame:function(a,b,c){a*=2,this.frames[a]=b,this.frames[a+1]=c},apply:function(a,b,c,d,e){var f=this.frames;if(!(c<f[0])){var g=a.bones[this.boneIndex];if(c>=f[f.length-2]){for(var h=g.data.rotation+f[f.length-1]-g.rotation;h>180;)h-=360;for(;-180>h;)h+=360;return void(g.rotation+=h*e)}var i=spine.binarySearch(f,c,2),j=f[i-1],k=f[i],l=1-(c-k)/(f[i-2]-k);l=this.curves.getCurvePercent(i/2-1,l);for(var h=f[i+1]-j;h>180;)h-=360;for(;-180>h;)h+=360;for(h=g.data.rotation+(j+h*l)-g.rotation;h>180;)h-=360;for(;-180>h;)h+=360;g.rotation+=h*e}}},spine.TranslateTimeline=function(a){this.curves=new spine.Curves(a),this.frames=[],this.frames.length=3*a},spine.TranslateTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/3},setFrame:function(a,b,c,d){a*=3,this.frames[a]=b,this.frames[a+1]=c,this.frames[a+2]=d},apply:function(a,b,c,d,e){var f=this.frames;if(!(c<f[0])){var g=a.bones[this.boneIndex];if(c>=f[f.length-3])return g.x+=(g.data.x+f[f.length-2]-g.x)*e,void(g.y+=(g.data.y+f[f.length-1]-g.y)*e);var h=spine.binarySearch(f,c,3),i=f[h-2],j=f[h-1],k=f[h],l=1-(c-k)/(f[h+-3]-k);l=this.curves.getCurvePercent(h/3-1,l),g.x+=(g.data.x+i+(f[h+1]-i)*l-g.x)*e,g.y+=(g.data.y+j+(f[h+2]-j)*l-g.y)*e}}},spine.ScaleTimeline=function(a){this.curves=new spine.Curves(a),this.frames=[],this.frames.length=3*a
},spine.ScaleTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/3},setFrame:function(a,b,c,d){a*=3,this.frames[a]=b,this.frames[a+1]=c,this.frames[a+2]=d},apply:function(a,b,c,d,e){var f=this.frames;if(!(c<f[0])){var g=a.bones[this.boneIndex];if(c>=f[f.length-3])return g.scaleX+=(g.data.scaleX-1+f[f.length-2]-g.scaleX)*e,void(g.scaleY+=(g.data.scaleY-1+f[f.length-1]-g.scaleY)*e);var h=spine.binarySearch(f,c,3),i=f[h-2],j=f[h-1],k=f[h],l=1-(c-k)/(f[h+-3]-k);l=this.curves.getCurvePercent(h/3-1,l),g.scaleX+=(g.data.scaleX-1+i+(f[h+1]-i)*l-g.scaleX)*e,g.scaleY+=(g.data.scaleY-1+j+(f[h+2]-j)*l-g.scaleY)*e}}},spine.ColorTimeline=function(a){this.curves=new spine.Curves(a),this.frames=[],this.frames.length=5*a},spine.ColorTimeline.prototype={slotIndex:0,getFrameCount:function(){return this.frames.length/5},setFrame:function(a,b,c,d,e,f){a*=5,this.frames[a]=b,this.frames[a+1]=c,this.frames[a+2]=d,this.frames[a+3]=e,this.frames[a+4]=f},apply:function(a,b,c,d,e){var f=this.frames;if(!(c<f[0])){var g,h,i,j;if(c>=f[f.length-5]){var k=f.length-1;g=f[k-3],h=f[k-2],i=f[k-1],j=f[k]}else{var l=spine.binarySearch(f,c,5),m=f[l-4],n=f[l-3],o=f[l-2],p=f[l-1],q=f[l],r=1-(c-q)/(f[l-5]-q);r=this.curves.getCurvePercent(l/5-1,r),g=m+(f[l+1]-m)*r,h=n+(f[l+2]-n)*r,i=o+(f[l+3]-o)*r,j=p+(f[l+4]-p)*r}var s=a.slots[this.slotIndex];1>e?(s.r+=(g-s.r)*e,s.g+=(h-s.g)*e,s.b+=(i-s.b)*e,s.a+=(j-s.a)*e):(s.r=g,s.g=h,s.b=i,s.a=j)}}},spine.AttachmentTimeline=function(a){this.curves=new spine.Curves(a),this.frames=[],this.frames.length=a,this.attachmentNames=[],this.attachmentNames.length=a},spine.AttachmentTimeline.prototype={slotIndex:0,getFrameCount:function(){return this.frames.length},setFrame:function(a,b,c){this.frames[a]=b,this.attachmentNames[a]=c},apply:function(a,b,c){var d=this.frames;if(!(c<d[0])){var e;e=c>=d[d.length-1]?d.length-1:spine.binarySearch(d,c,1)-1;var f=this.attachmentNames[e];a.slots[this.slotIndex].setAttachment(f?a.getAttachmentBySlotIndex(this.slotIndex,f):null)}}},spine.EventTimeline=function(a){this.frames=[],this.frames.length=a,this.events=[],this.events.length=a},spine.EventTimeline.prototype={getFrameCount:function(){return this.frames.length},setFrame:function(a,b,c){this.frames[a]=b,this.events[a]=c},apply:function(a,b,c,d,e){if(d){var f=this.frames,g=f.length;if(b>c)this.apply(a,b,Number.MAX_VALUE,d,e),b=-1;else if(b>=f[g-1])return;if(!(c<f[0])){var h;if(b<f[0])h=0;else{h=spine.binarySearch(f,b,1);for(var i=f[h];h>0&&f[h-1]==i;)h--}for(var j=this.events;g>h&&c>=f[h];h++)d.push(j[h])}}}},spine.DrawOrderTimeline=function(a){this.frames=[],this.frames.length=a,this.drawOrders=[],this.drawOrders.length=a},spine.DrawOrderTimeline.prototype={getFrameCount:function(){return this.frames.length},setFrame:function(a,b,c){this.frames[a]=b,this.drawOrders[a]=c},apply:function(a,b,c){var d=this.frames;if(!(c<d[0])){var e;e=c>=d[d.length-1]?d.length-1:spine.binarySearch(d,c,1)-1;var f=a.drawOrder,g=a.slots,h=this.drawOrders[e];if(h)for(var i=0,j=h.length;j>i;i++)f[i]=a.slots[h[i]];else for(var i=0,j=g.length;j>i;i++)f[i]=g[i]}}},spine.FfdTimeline=function(a){this.curves=new spine.Curves(a),this.frames=[],this.frames.length=a,this.frameVertices=[],this.frameVertices.length=a},spine.FfdTimeline.prototype={slotIndex:0,attachment:0,getFrameCount:function(){return this.frames.length},setFrame:function(a,b,c){this.frames[a]=b,this.frameVertices[a]=c},apply:function(a,b,c,d,e){var f=a.slots[slotIndex];if(f.attachment==attachment){var g=this.frames;if(c<g[0])return void(f.attachmentVertices.length=0);var h=this.frameVertices,i=h[0].length,j=f.attachmentVertices;if(j.length!=i&&(e=1),j.length=i,c>=g[g.length-1]){var k=h[g.length-1];if(1>e)for(var l=0;i>l;l++)j[l]+=(k[l]-j[l])*e;else for(var l=0;i>l;l++)j[l]=k[l]}else{var m=spine.binarySearch(g,c,1),n=g[m],o=1-(c-n)/(g[m-1]-n);o=this.curves.getCurvePercent(m-1,0>o?0:o>1?1:o);var p=h[m-1],q=h[m];if(1>e)for(var l=0;i>l;l++){var r=p[l];j[l]+=(r+(q[l]-r)*o-j[l])*e}else for(var l=0;i>l;l++){var r=p[l];j[l]=r+(q[l]-r)*o}}}}},spine.SkeletonData=function(){this.bones=[],this.slots=[],this.skins=[],this.events=[],this.animations=[]},spine.SkeletonData.prototype={defaultSkin:null,findBone:function(a){for(var b=this.bones,c=0,d=b.length;d>c;c++)if(b[c].name==a)return b[c];return null},findBoneIndex:function(a){for(var b=this.bones,c=0,d=b.length;d>c;c++)if(b[c].name==a)return c;return-1},findSlot:function(a){for(var b=this.slots,c=0,d=b.length;d>c;c++)if(b[c].name==a)return slot[c];return null},findSlotIndex:function(a){for(var b=this.slots,c=0,d=b.length;d>c;c++)if(b[c].name==a)return c;return-1},findSkin:function(a){for(var b=this.skins,c=0,d=b.length;d>c;c++)if(b[c].name==a)return b[c];return null},findEvent:function(a){for(var b=this.events,c=0,d=b.length;d>c;c++)if(b[c].name==a)return b[c];return null},findAnimation:function(a){for(var b=this.animations,c=0,d=b.length;d>c;c++)if(b[c].name==a)return b[c];return null}},spine.Skeleton=function(a){this.data=a,this.bones=[];for(var b=0,c=a.bones.length;c>b;b++){var d=a.bones[b],e=d.parent?this.bones[a.bones.indexOf(d.parent)]:null;this.bones.push(new spine.Bone(d,e))}this.slots=[],this.drawOrder=[];for(var b=0,c=a.slots.length;c>b;b++){var f=a.slots[b],g=this.bones[a.bones.indexOf(f.boneData)],h=new spine.Slot(f,this,g);this.slots.push(h),this.drawOrder.push(h)}},spine.Skeleton.prototype={x:0,y:0,skin:null,r:1,g:1,b:1,a:1,time:0,flipX:!1,flipY:!1,updateWorldTransform:function(){for(var a=this.flipX,b=this.flipY,c=this.bones,d=0,e=c.length;e>d;d++)c[d].updateWorldTransform(a,b)},setToSetupPose:function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},setBonesToSetupPose:function(){for(var a=this.bones,b=0,c=a.length;c>b;b++)a[b].setToSetupPose()},setSlotsToSetupPose:function(){for(var a=this.slots,b=this.drawOrder,c=0,d=a.length;d>c;c++)b[c]=a[c],a[c].setToSetupPose(c)},getRootBone:function(){return 0==this.bones.length?null:this.bones[0]},findBone:function(a){for(var b=this.bones,c=0,d=b.length;d>c;c++)if(b[c].data.name==a)return b[c];return null},findBoneIndex:function(a){for(var b=this.bones,c=0,d=b.length;d>c;c++)if(b[c].data.name==a)return c;return-1},findSlot:function(a){for(var b=this.slots,c=0,d=b.length;d>c;c++)if(b[c].data.name==a)return b[c];return null},findSlotIndex:function(a){for(var b=this.slots,c=0,d=b.length;d>c;c++)if(b[c].data.name==a)return c;return-1},setSkinByName:function(a){var b=this.data.findSkin(a);if(!b)throw"Skin not found: "+a;this.setSkin(b)},setSkin:function(a){if(a)if(this.skin)a._attachAll(this,this.skin);else for(var b=this.slots,c=0,d=b.length;d>c;c++){var e=b[c],f=e.data.attachmentName;if(f){var g=a.getAttachment(c,f);g&&e.setAttachment(g)}}this.skin=a},getAttachmentBySlotName:function(a,b){return this.getAttachmentBySlotIndex(this.data.findSlotIndex(a),b)},getAttachmentBySlotIndex:function(a,b){if(this.skin){var c=this.skin.getAttachment(a,b);if(c)return c}return this.data.defaultSkin?this.data.defaultSkin.getAttachment(a,b):null},setAttachment:function(a,b){for(var c=this.slots,d=0,e=c.length;e>d;d++){var f=c[d];if(f.data.name==a){var g=null;if(b&&(g=this.getAttachmentBySlotIndex(d,b),!g))throw"Attachment not found: "+b+", for slot: "+a;return void f.setAttachment(g)}}throw"Slot not found: "+a},update:function(a){this.time+=a}},spine.EventData=function(a){this.name=a},spine.EventData.prototype={intValue:0,floatValue:0,stringValue:null},spine.Event=function(a){this.data=a},spine.Event.prototype={intValue:0,floatValue:0,stringValue:null},spine.AttachmentType={region:0,boundingbox:1,mesh:2,skinnedmesh:3},spine.RegionAttachment=function(a){this.name=a,this.offset=[],this.offset.length=8,this.uvs=[],this.uvs.length=8},spine.RegionAttachment.prototype={type:spine.AttachmentType.region,x:0,y:0,rotation:0,scaleX:1,scaleY:1,width:0,height:0,r:1,g:1,b:1,a:1,path:null,rendererObject:null,regionOffsetX:0,regionOffsetY:0,regionWidth:0,regionHeight:0,regionOriginalWidth:0,regionOriginalHeight:0,setUVs:function(a,b,c,d,e){var f=this.uvs;e?(f[2]=a,f[3]=d,f[4]=a,f[5]=b,f[6]=c,f[7]=b,f[0]=c,f[1]=d):(f[0]=a,f[1]=d,f[2]=a,f[3]=b,f[4]=c,f[5]=b,f[6]=c,f[7]=d)},updateOffset:function(){var a=this.width/this.regionOriginalWidth*this.scaleX,b=this.height/this.regionOriginalHeight*this.scaleY,c=-this.width/2*this.scaleX+this.regionOffsetX*a,d=-this.height/2*this.scaleY+this.regionOffsetY*b,e=c+this.regionWidth*a,f=d+this.regionHeight*b,g=this.rotation*Math.PI/180,h=Math.cos(g),i=Math.sin(g),j=c*h+this.x,k=c*i,l=d*h+this.y,m=d*i,n=e*h+this.x,o=e*i,p=f*h+this.y,q=f*i,r=this.offset;r[0]=j-m,r[1]=l+k,r[2]=j-q,r[3]=p+k,r[4]=n-q,r[5]=p+o,r[6]=n-m,r[7]=l+o},computeVertices:function(a,b,c,d){a+=c.worldX,b+=c.worldY;var e=c.m00,f=c.m01,g=c.m10,h=c.m11,i=this.offset;d[0]=i[0]*e+i[1]*f+a,d[1]=i[0]*g+i[1]*h+b,d[2]=i[2]*e+i[3]*f+a,d[3]=i[2]*g+i[3]*h+b,d[4]=i[4]*e+i[5]*f+a,d[5]=i[4]*g+i[5]*h+b,d[6]=i[6]*e+i[7]*f+a,d[7]=i[6]*g+i[7]*h+b}},spine.MeshAttachment=function(a){this.name=a},spine.MeshAttachment.prototype={type:spine.AttachmentType.mesh,vertices:null,uvs:null,regionUVs:null,triangles:null,hullLength:0,r:1,g:1,b:1,a:1,path:null,rendererObject:null,regionU:0,regionV:0,regionU2:0,regionV2:0,regionRotate:!1,regionOffsetX:0,regionOffsetY:0,regionWidth:0,regionHeight:0,regionOriginalWidth:0,regionOriginalHeight:0,edges:null,width:0,height:0,updateUVs:function(){var a=regionU2-regionU,b=regionV2-regionV,c=regionUVs.length;if(uvs&&uvs.length==c||(uvs=[],uvs.length=c),regionRotate)for(var d=0;c>d;d+=2)uvs[d]=regionU+regionUVs[d+1]*a,uvs[d+1]=regionV+b-regionUVs[d]*b;else for(var d=0;c>d;d+=2)uvs[d]=regionU+regionUVs[d]*a,uvs[d+1]=regionV+regionUVs[d+1]*b},computeWorldVertices:function(a,b,c,d){var e=c.bone;a+=e.worldX,b+=e.worldY;var f=e.m00,g=e.m01,h=e.m10,i=e.m11,j=this.vertices,k=j.length;c.attachmentVertices.length==k&&(j=c.attachmentVertices);for(var l=0;k>l;l+=2){var m=j[l],n=j[l+1];d[l]=m*f+n*g+a,d[l+1]=m*h+n*i+b}}},spine.SkinnedMeshAttachment=function(a){this.name=a},spine.SkinnedMeshAttachment.prototype={type:spine.AttachmentType.skinnedmesh,bones:null,weights:null,uvs:null,regionUVs:null,triangles:null,hullLength:0,r:1,g:1,b:1,a:1,path:null,rendererObject:null,regionU:0,regionV:0,regionU2:0,regionV2:0,regionRotate:!1,regionOffsetX:0,regionOffsetY:0,regionWidth:0,regionHeight:0,regionOriginalWidth:0,regionOriginalHeight:0,edges:null,width:0,height:0,updateUVs:function(){var a=regionU2-regionU,b=regionV2-regionV,c=regionUVs.length;if(uvs&&uvs.length==c||(uvs=[],uvs.length=c),regionRotate)for(var d=0;c>d;d+=2)uvs[d]=regionU+regionUVs[d+1]*a,uvs[d+1]=regionV+b-regionUVs[d]*b;else for(var d=0;c>d;d+=2)uvs[d]=regionU+regionUVs[d]*a,uvs[d+1]=regionV+regionUVs[d+1]*b},computeWorldVertices:function(a,b,c,d){var e,f,g,h,i,j,k,l=c.skeleton.bones,m=this.weights,n=this.bones,o=0,p=0,q=0,r=0,s=n.length;if(0==c.attachmentVertices.length)for(;s>p;o+=2){for(f=0,g=0,e=n[p++]+p;e>p;p++,q+=3)h=l[n[p]],i=m[q],j=m[q+1],k=m[q+2],f+=(i*h.m00+j*h.m01+h.worldX)*k,g+=(i*h.m10+j*h.m11+h.worldY)*k;d[o]=f+a,d[o+1]=g+b}else for(var t=c.attachmentVertices;s>p;o+=2){for(f=0,g=0,e=n[p++]+p;e>p;p++,q+=3,r+=2)h=l[n[p]],i=m[q]+t[r],j=m[q+1]+t[r+1],k=m[q+2],f+=(i*h.m00+j*h.m01+h.worldX)*k,g+=(i*h.m10+j*h.m11+h.worldY)*k;d[o]=f+a,d[o+1]=g+b}}},spine.BoundingBoxAttachment=function(a){this.name=a,this.vertices=[]},spine.BoundingBoxAttachment.prototype={type:spine.AttachmentType.boundingbox,computeWorldVertices:function(a,b,c,d){a+=c.worldX,b+=c.worldY;for(var e=c.m00,f=c.m01,g=c.m10,h=c.m11,i=this.vertices,j=0,k=i.length;k>j;j+=2){var l=i[j],m=i[j+1];d[j]=l*e+m*f+a,d[j+1]=l*g+m*h+b}}},spine.AnimationStateData=function(a){this.skeletonData=a,this.animationToMixTime={}},spine.AnimationStateData.prototype={defaultMix:0,setMixByName:function(a,b,c){var d=this.skeletonData.findAnimation(a);if(!d)throw"Animation not found: "+a;var e=this.skeletonData.findAnimation(b);if(!e)throw"Animation not found: "+b;this.setMix(d,e,c)},setMix:function(a,b,c){this.animationToMixTime[a.name+":"+b.name]=c},getMix:function(a,b){var c=this.animationToMixTime[a.name+":"+b.name];return c?c:this.defaultMix}},spine.TrackEntry=function(){},spine.TrackEntry.prototype={next:null,previous:null,animation:null,loop:!1,delay:0,time:0,lastTime:-1,endTime:0,timeScale:1,mixTime:0,mixDuration:0,mix:1,onStart:null,onEnd:null,onComplete:null,onEvent:null},spine.AnimationState=function(a){this.data=a,this.tracks=[],this.events=[]},spine.AnimationState.prototype={onStart:null,onEnd:null,onComplete:null,onEvent:null,timeScale:1,update:function(a){a*=this.timeScale;for(var b=0;b<this.tracks.length;b++){var c=this.tracks[b];if(c){if(c.time+=a*c.timeScale,c.previous){var d=a*c.previous.timeScale;c.previous.time+=d,c.mixTime+=d}var e=c.next;e?(e.time=c.lastTime-e.delay,e.time>=0&&this.setCurrent(b,e)):!c.loop&&c.lastTime>=c.endTime&&this.clearTrack(b)}}},apply:function(a){for(var b=0;b<this.tracks.length;b++){var c=this.tracks[b];if(c){this.events.length=0;var d=c.time,e=c.lastTime,f=c.endTime,g=c.loop;!g&&d>f&&(d=f);var h=c.previous;if(h){var i=h.time;!h.loop&&i>h.endTime&&(i=h.endTime),h.animation.apply(a,i,i,h.loop,null);var j=c.mixTime/c.mixDuration*c.mix;j>=1&&(j=1,c.previous=null),c.animation.mix(a,c.lastTime,d,g,this.events,j)}else 1==c.mix?c.animation.apply(a,c.lastTime,d,g,this.events):c.animation.mix(a,c.lastTime,d,g,this.events,c.mix);for(var k=0,l=this.events.length;l>k;k++){var m=this.events[k];null!=c.onEvent&&c.onEvent(b,m),null!=this.onEvent&&this.onEvent(b,m)}if(g?e%f>d%f:f>e&&d>=f){var n=Math.floor(d/f);c.onComplete&&c.onComplete(b,n),this.onComplete&&this.onComplete(b,n)}c.lastTime=c.time}}},clearTracks:function(){for(var a=0,b=this.tracks.length;b>a;a++)this.clearTrack(a);this.tracks.length=0},clearTrack:function(a){if(!(a>=this.tracks.length)){var b=this.tracks[a];b&&(null!=b.onEnd&&b.onEnd(a),null!=this.onEnd&&this.onEnd(a),this.tracks[a]=null)}},_expandToIndex:function(a){if(a<this.tracks.length)return this.tracks[a];for(;a>=this.tracks.length;)this.tracks.push(null);return null},setCurrent:function(a,b){var c=this._expandToIndex(a);if(c){var d=c.previous;c.previous=null,null!=c.onEnd&&c.onEnd(a),null!=this.onEnd&&this.onEnd(a),b.mixDuration=this.data.getMix(c.animation,b.animation),b.mixDuration>0&&(b.mixTime=0,b.previous=d&&c.mixTime/c.mixDuration<.5?d:c)}this.tracks[a]=b,null!=b.onStart&&b.onStart(a),null!=this.onStart&&this.onStart(a)},setAnimationByName:function(a,b,c){var d=this.data.skeletonData.findAnimation(b);if(!d)throw"Animation not found: "+b;return this.setAnimation(a,d,c)},setAnimation:function(a,b,c){var d=new spine.TrackEntry;return d.animation=b,d.loop=c,d.endTime=b.duration,this.setCurrent(a,d),d},addAnimationByName:function(a,b,c,d){var e=this.data.skeletonData.findAnimation(b);if(!e)throw"Animation not found: "+b;return this.addAnimation(a,e,c,d)},addAnimation:function(a,b,c,d){var e=new spine.TrackEntry;e.animation=b,e.loop=c,e.endTime=b.duration;var f=this._expandToIndex(a);if(f){for(;f.next;)f=f.next;f.next=e}else this.tracks[a]=e;return 0>=d&&(f?d+=f.endTime-this.data.getMix(f.animation,b):d=0),e.delay=d,e},getCurrent:function(a){return a>=this.tracks.length?null:this.tracks[a]}},spine.SkeletonJson=function(a){this.attachmentLoader=a},spine.SkeletonJson.prototype={scale:1,readSkeletonData:function(a){for(var b=new spine.SkeletonData,c=a.bones,d=0,e=c.length;e>d;d++){var f=c[d],g=null;if(f.parent&&(g=b.findBone(f.parent),!g))throw"Parent bone not found: "+f.parent;var h=new spine.BoneData(f.name,g);h.length=(f.length||0)*this.scale,h.x=(f.x||0)*this.scale,h.y=(f.y||0)*this.scale,h.rotation=f.rotation||0,h.scaleX=f.hasOwnProperty("scaleX")?f.scaleX:1,h.scaleY=f.hasOwnProperty("scaleY")?f.scaleY:1,h.inheritScale=!f.inheritScale||"true"==f.inheritScale,h.inheritRotation=!f.inheritRotation||"true"==f.inheritRotation,b.bones.push(h)}for(var i=a.slots,d=0,e=i.length;e>d;d++){var j=i[d],h=b.findBone(j.bone);if(!h)throw"Slot bone not found: "+j.bone;var k=new spine.SlotData(j.name,h),l=j.color;l&&(k.r=this.toColor(l,0),k.g=this.toColor(l,1),k.b=this.toColor(l,2),k.a=this.toColor(l,3)),k.attachmentName=j.attachment,k.additiveBlending=j.additive&&"true"==j.additive,b.slots.push(k)}var m=a.skins;for(var n in m)if(m.hasOwnProperty(n)){var o=m[n],p=new spine.Skin(n);for(var q in o)if(o.hasOwnProperty(q)){var r=b.findSlotIndex(q),s=o[q];for(var t in s)if(s.hasOwnProperty(t)){var u=this.readAttachment(p,t,s[t]);null!=u&&p.addAttachment(r,t,u)}}b.skins.push(p),"default"==p.name&&(b.defaultSkin=p)}var v=a.events;for(var w in v)if(v.hasOwnProperty(w)){var x=v[w],y=new spine.EventData(w);y.intValue=x["int"]||0,y.floatValue=x["float"]||0,y.stringValue=x.string||null,b.events.push(y)}var z=a.animations;for(var A in z)z.hasOwnProperty(A)&&this.readAnimation(A,z[A],b);return b},readAttachment:function(a,b,c){b=c.name||b;var d=spine.AttachmentType[c.type||"region"],e=c.path||b,f=this.scale;if(d==spine.AttachmentType.region){var g=this.attachmentLoader.newRegionAttachment(a,b,e);if(!g)return null;g.path=e,g.x=(c.x||0)*this.scale,g.y=(c.y||0)*this.scale,g.scaleX=c.hasOwnProperty("scaleX")?c.scaleX:1,g.scaleY=c.hasOwnProperty("scaleY")?c.scaleY:1,g.rotation=c.rotation||0,g.width=(c.width||0)*f,g.height=(c.height||0)*f;var h=c.color;return h&&(g.r=this.toColor(h,0),g.g=this.toColor(h,1),g.b=this.toColor(h,2),g.a=this.toColor(h,3)),g.updateOffset(),g}if(d==spine.AttachmentType.mesh){var i=this.attachmentLoader.newMeshAttachment(a,b,e);return i?(i.path=e,i.vertices=this.getFloatArray(c,"vertices",f),i.triangles=this.getIntArray(c,"triangles"),i.regionUVs=this.getFloatArray(c,"uvs",1),i.updateUVs(),h=c.color,h&&(i.r=this.toColor(h,0),i.g=this.toColor(h,1),i.b=this.toColor(h,2),i.a=this.toColor(h,3)),i.hullLength=2*(c.hull||0),c.edges&&(i.edges=this.getIntArray(c,"edges")),i.width=(c.width||0)*f,i.height=(c.height||0)*f,i):null}if(d==spine.AttachmentType.skinnedmesh){var i=this.attachmentLoader.newSkinnedMeshAttachment(a,b,e);if(!i)return null;i.path=e;var j=this.getFloatArray(c,"uvs",1);r=this.getFloatArray(c,"vertices",1);for(var k=[],l=[],m=0,n=r.length;n>m;){var o=0|r[m++];l[l.length]=o;for(var p=m+4*o;p>m;)l[l.length]=r[m],k[k.length]=r[m+1]*f,k[k.length]=r[m+2]*f,k[k.length]=r[m+3],m+=4}return i.bones=l,i.weights=k,i.triangles=this.getIntArray(c,"triangles"),i.regionUVs=j,i.updateUVs(),h=c.color,h&&(i.r=this.toColor(h,0),i.g=this.toColor(h,1),i.b=this.toColor(h,2),i.a=this.toColor(h,3)),i.hullLength=2*(c.hull||0),c.edges&&(i.edges=this.getIntArray(c,"edges")),i.width=(c.width||0)*f,i.height=(c.height||0)*f,i}if(d==spine.AttachmentType.boundingbox){for(var q=this.attachmentLoader.newBoundingBoxAttachment(a,b),r=c.vertices,m=0,n=r.length;n>m;m++)q.vertices.push(r[m]*this.scale);return q}throw"Unknown attachment type: "+d},readAnimation:function(a,b,c){var d=[],e=0,f=b.slots;for(var g in f)if(f.hasOwnProperty(g)){var h=f[g],i=c.findSlotIndex(g);for(var j in h)if(h.hasOwnProperty(j)){var k=h[j];if("color"==j){var l=new spine.ColorTimeline(k.length);l.slotIndex=i;for(var m=0,n=0,o=k.length;o>n;n++){var p=k[n],q=p.color,r=this.toColor(q,0),s=this.toColor(q,1),t=this.toColor(q,2),u=this.toColor(q,3);l.setFrame(m,p.time,r,s,t,u),this.readCurve(l,m,p),m++}d.push(l),e=Math.max(e,l.frames[5*l.getFrameCount()-5])}else{if("attachment"!=j)throw"Invalid timeline type for a slot: "+j+" ("+g+")";var l=new spine.AttachmentTimeline(k.length);l.slotIndex=i;for(var m=0,n=0,o=k.length;o>n;n++){var p=k[n];l.setFrame(m++,p.time,p.name)}d.push(l),e=Math.max(e,l.frames[l.getFrameCount()-1])}}}var v=b.bones;for(var w in v)if(v.hasOwnProperty(w)){var x=c.findBoneIndex(w);if(-1==x)throw"Bone not found: "+w;var y=v[w];for(var j in y)if(y.hasOwnProperty(j)){var k=y[j];if("rotate"==j){var l=new spine.RotateTimeline(k.length);l.boneIndex=x;for(var m=0,n=0,o=k.length;o>n;n++){var p=k[n];l.setFrame(m,p.time,p.angle),this.readCurve(l,m,p),m++}d.push(l),e=Math.max(e,l.frames[2*l.getFrameCount()-2])}else{if("translate"!=j&&"scale"!=j)throw"Invalid timeline type for a bone: "+j+" ("+w+")";var l,z=1;"scale"==j?l=new spine.ScaleTimeline(k.length):(l=new spine.TranslateTimeline(k.length),z=this.scale),l.boneIndex=x;for(var m=0,n=0,o=k.length;o>n;n++){var p=k[n],A=(p.x||0)*z,B=(p.y||0)*z;l.setFrame(m,p.time,A,B),this.readCurve(l,m,p),m++}d.push(l),e=Math.max(e,l.frames[3*l.getFrameCount()-3])}}}var C=b.ffd;for(var D in C){var E=c.findSkin(D),h=C[D];for(g in h){var i=c.findSlotIndex(g),F=h[g];for(var G in F){var k=F[G],l=new spine.FfdTimeline(k.length),H=E.getAttachment(i,G);if(!H)throw"FFD attachment not found: "+G;l.slotIndex=i,l.attachment=H;var I,J=H.type==spine.AttachmentType.mesh;I=J?H.vertices.length:H.weights.length/3*2;for(var m=0,n=0,o=k.length;o>n;n++){var K,p=k[n];if(p.vertices){var L=p.vertices,K=[];K.length=I;var M=p.offset||0,N=L.length;if(1==scale)for(var O=0;N>O;O++)K[O+M]=L[O];else for(var O=0;N>O;O++)K[O+M]=L[O]*scale;if(J)for(var P=H.vertices,O=0,N=K.length;N>O;n++)K[O]+=P[O]}else J?K=H.vertices:(K=[],K.length=I);l.setFrame(m,p.time,K),this.readCurve(l,m,p),m++}d[d.length]=l,e=Math.max(e,l.frames[l.frameCount-1])}}}var Q=b.draworder;if(Q){for(var l=new spine.DrawOrderTimeline(Q.length),R=c.slots.length,m=0,n=0,o=Q.length;o>n;n++){var S=Q[n],T=null;if(S.offsets){T=[],T.length=R;for(var O=R-1;O>=0;O--)T[O]=-1;var U=S.offsets,V=[];V.length=R-U.length;for(var W=0,X=0,O=0,N=U.length;N>O;O++){var Y=U[O],i=c.findSlotIndex(Y.slot);if(-1==i)throw"Slot not found: "+Y.slot;for(;W!=i;)V[X++]=W++;T[W+Y.offset]=W++}for(;R>W;)V[X++]=W++;for(var O=R-1;O>=0;O--)-1==T[O]&&(T[O]=V[--X])}l.setFrame(m++,S.time,T)}d.push(l),e=Math.max(e,l.frames[l.getFrameCount()-1])}var Z=b.events;if(Z){for(var l=new spine.EventTimeline(Z.length),m=0,n=0,o=Z.length;o>n;n++){var $=Z[n],_=c.findEvent($.name);if(!_)throw"Event not found: "+$.name;var ab=new spine.Event(_);ab.intValue=$.hasOwnProperty("int")?$["int"]:_.intValue,ab.floatValue=$.hasOwnProperty("float")?$["float"]:_.floatValue,ab.stringValue=$.hasOwnProperty("string")?$.string:_.stringValue,l.setFrame(m++,$.time,ab)}d.push(l),e=Math.max(e,l.frames[l.getFrameCount()-1])}c.animations.push(new spine.Animation(a,d,e))},readCurve:function(a,b,c){var d=c.curve;d&&("stepped"==d?a.curves.setStepped(b):d instanceof Array&&a.curves.setCurve(b,d[0],d[1],d[2],d[3]))},toColor:function(a,b){if(8!=a.length)throw"Color hexidecimal length must be 8, recieved: "+a;return parseInt(a.substring(2*b,2*b+2),16)/255},getFloatArray:function(a,b,c){var d=a[b],e=[];e=d.length;var f=0,g=d.length;if(1==c)for(;g>f;f++)e[f]=d[f];else for(;g>f;f++)e[f]=d[f]*c;return e},getIntArray:function(a,b){var c=a[b],d=[];d=c.length;for(var e=0,f=c.length;f>e;e++)d[e]=0|c[e];return d}},spine.Atlas=function(a,b){this.textureLoader=b,this.pages=[],this.regions=[];var c=new spine.AtlasReader(a),d=[];d.length=4;for(var e=null;;){var f=c.readLine();if(null==f)break;if(f=c.trim(f),0==f.length)e=null;else if(e){var g=new spine.AtlasRegion;g.name=f,g.page=e,g.rotate="true"==c.readValue(),c.readTuple(d);var h=parseInt(d[0]),i=parseInt(d[1]);c.readTuple(d);var j=parseInt(d[0]),k=parseInt(d[1]);g.u=h/e.width,g.v=i/e.height,g.rotate?(g.u2=(h+k)/e.width,g.v2=(i+j)/e.height):(g.u2=(h+j)/e.width,g.v2=(i+k)/e.height),g.x=h,g.y=i,g.width=Math.abs(j),g.height=Math.abs(k),4==c.readTuple(d)&&(g.splits=[parseInt(d[0]),parseInt(d[1]),parseInt(d[2]),parseInt(d[3])],4==c.readTuple(d)&&(g.pads=[parseInt(d[0]),parseInt(d[1]),parseInt(d[2]),parseInt(d[3])],c.readTuple(d))),g.originalWidth=parseInt(d[0]),g.originalHeight=parseInt(d[1]),c.readTuple(d),g.offsetX=parseInt(d[0]),g.offsetY=parseInt(d[1]),g.index=parseInt(c.readValue()),this.regions.push(g)}else{e=new spine.AtlasPage,e.name=f,2==c.readTuple(d)&&(e.width=parseInt(d[0]),e.height=parseInt(d[1]),c.readTuple(d)),e.format=spine.Atlas.Format[d[0]],c.readTuple(d),e.minFilter=spine.Atlas.TextureFilter[d[0]],e.magFilter=spine.Atlas.TextureFilter[d[1]];var l=c.readValue();e.uWrap=spine.Atlas.TextureWrap.clampToEdge,e.vWrap=spine.Atlas.TextureWrap.clampToEdge,"x"==l?e.uWrap=spine.Atlas.TextureWrap.repeat:"y"==l?e.vWrap=spine.Atlas.TextureWrap.repeat:"xy"==l&&(e.uWrap=e.vWrap=spine.Atlas.TextureWrap.repeat),b.load(e,f,this),this.pages.push(e)}}},spine.Atlas.prototype={findRegion:function(a){for(var b=this.regions,c=0,d=b.length;d>c;c++)if(b[c].name==a)return b[c];return null},dispose:function(){for(var a=this.pages,b=0,c=a.length;c>b;b++)this.textureLoader.unload(a[b].rendererObject)},updateUVs:function(a){for(var b=this.regions,c=0,d=b.length;d>c;c++){var e=b[c];e.page==a&&(e.u=e.x/a.width,e.v=e.y/a.height,e.rotate?(e.u2=(e.x+e.height)/a.width,e.v2=(e.y+e.width)/a.height):(e.u2=(e.x+e.width)/a.width,e.v2=(e.y+e.height)/a.height))}}},spine.Atlas.Format={alpha:0,intensity:1,luminanceAlpha:2,rgb565:3,rgba4444:4,rgb888:5,rgba8888:6},spine.Atlas.TextureFilter={nearest:0,linear:1,mipMap:2,mipMapNearestNearest:3,mipMapLinearNearest:4,mipMapNearestLinear:5,mipMapLinearLinear:6},spine.Atlas.TextureWrap={mirroredRepeat:0,clampToEdge:1,repeat:2},spine.AtlasPage=function(){},spine.AtlasPage.prototype={name:null,format:null,minFilter:null,magFilter:null,uWrap:null,vWrap:null,rendererObject:null,width:0,height:0},spine.AtlasRegion=function(){},spine.AtlasRegion.prototype={page:null,name:null,x:0,y:0,width:0,height:0,u:0,v:0,u2:0,v2:0,offsetX:0,offsetY:0,originalWidth:0,originalHeight:0,index:0,rotate:!1,splits:null,pads:null},spine.AtlasReader=function(a){this.lines=a.split(/\r\n|\r|\n/)},spine.AtlasReader.prototype={index:0,trim:function(a){return a.replace(/^\s+|\s+$/g,"")},readLine:function(){return this.index>=this.lines.length?null:this.lines[this.index++]},readValue:function(){var a=this.readLine(),b=a.indexOf(":");if(-1==b)throw"Invalid line: "+a;return this.trim(a.substring(b+1))},readTuple:function(a){var b=this.readLine(),c=b.indexOf(":");if(-1==c)throw"Invalid line: "+b;for(var d=0,e=c+1;3>d;d++){var f=b.indexOf(",",e);if(-1==f)break;a[d]=this.trim(b.substr(e,f-e)),e=f+1}return a[d]=this.trim(b.substring(e)),d+1}},spine.AtlasAttachmentLoader=function(a){this.atlas=a},spine.AtlasAttachmentLoader.prototype={newRegionAttachment:function(a,b,c){var d=this.atlas.findRegion(b);if(!d)throw"Region not found in atlas: "+c+" (region attachment: "+b+")";var e=new spine.RegionAttachment(b);return e.rendererObject=d,e.setUVs(d.u,d.v,d.u2,d.v2,d.rotate),e.regionOffsetX=d.offsetX,e.regionOffsetY=d.offsetY,e.regionWidth=d.width,e.regionHeight=d.height,e.regionOriginalWidth=d.originalWidth,e.regionOriginalHeight=d.originalHeight,e},newMeshAttachment:function(a,b,c){var d=this.atlas.findRegion(b);if(!d)throw"Region not found in atlas: "+c+" (mesh attachment: "+b+")";var e=new spine.MeshAttachment(b);return e.rendererObject=d,e.regionU=d.u,e.regionV=d.v,e.regionU2=d.u2,e.regionV2=d.v2,e.regionRotate=d.rotate,e.regionOffsetX=d.offsetX,e.regionOffsetY=d.offsetY,e.regionWidth=d.width,e.regionHeight=d.height,e.regionOriginalWidth=d.originalWidth,e.regionOriginalHeight=d.originalHeight,e},newSkinnedMeshAttachment:function(a,b,c){var d=this.atlas.findRegion(b);if(!d)throw"Region not found in atlas: "+c+" (skinned mesh attachment: "+b+")";var e=new spine.SkinnedMeshAttachment(b);return e.rendererObject=d,e.regionU=d.u,e.regionV=d.v,e.regionU2=d.u2,e.regionV2=d.v2,e.regionRotate=d.rotate,e.regionOffsetX=d.offsetX,e.regionOffsetY=d.offsetY,e.regionWidth=d.width,e.regionHeight=d.height,e.regionOriginalWidth=d.originalWidth,e.regionOriginalHeight=d.originalHeight,e},newBoundingBoxAttachment:function(a,b){return new spine.BoundingBoxAttachment(b)}},spine.SkeletonBounds=function(){this.polygonPool=[],this.polygons=[],this.boundingBoxes=[]},spine.SkeletonBounds.prototype={minX:0,minY:0,maxX:0,maxY:0,update:function(a,b){var c=a.slots,d=c.length,e=a.x,f=a.y,g=this.boundingBoxes,h=this.polygonPool,i=this.polygons;g.length=0;for(var j=0,k=i.length;k>j;j++)h.push(i[j]);i.length=0;for(var j=0;d>j;j++){var l=c[j],m=l.attachment;if(m.type==spine.AttachmentType.boundingbox){g.push(m);var n,o=h.length;o>0?(n=h[o-1],h.splice(o-1,1)):n=[],i.push(n),n.length=m.vertices.length,m.computeWorldVertices(e,f,l.bone,n)}}b&&this.aabbCompute()},aabbCompute:function(){for(var a=this.polygons,b=Number.MAX_VALUE,c=Number.MAX_VALUE,d=Number.MIN_VALUE,e=Number.MIN_VALUE,f=0,g=a.length;g>f;f++)for(var h=a[f],i=0,j=h.length;j>i;i+=2){var k=h[i],l=h[i+1];b=Math.min(b,k),c=Math.min(c,l),d=Math.max(d,k),e=Math.max(e,l)}this.minX=b,this.minY=c,this.maxX=d,this.maxY=e},aabbContainsPoint:function(a,b){return a>=this.minX&&a<=this.maxX&&b>=this.minY&&b<=this.maxY},aabbIntersectsSegment:function(a,b,c,d){var e=this.minX,f=this.minY,g=this.maxX,h=this.maxY;if(e>=a&&e>=c||f>=b&&f>=d||a>=g&&c>=g||b>=h&&d>=h)return!1;var i=(d-b)/(c-a),j=i*(e-a)+b;if(j>f&&h>j)return!0;if(j=i*(g-a)+b,j>f&&h>j)return!0;var k=(f-b)/i+a;return k>e&&g>k?!0:(k=(h-b)/i+a,k>e&&g>k?!0:!1)},aabbIntersectsSkeleton:function(a){return this.minX<a.maxX&&this.maxX>a.minX&&this.minY<a.maxY&&this.maxY>a.minY},containsPoint:function(a,b){for(var c=this.polygons,d=0,e=c.length;e>d;d++)if(this.polygonContainsPoint(c[d],a,b))return this.boundingBoxes[d];return null},intersectsSegment:function(a,b,c,d){for(var e=this.polygons,f=0,g=e.length;g>f;f++)if(e[f].intersectsSegment(a,b,c,d))return this.boundingBoxes[f];return null},polygonContainsPoint:function(a,b,c){for(var d=a.length,e=d-2,f=!1,g=0;d>g;g+=2){var h=a[g+1],i=a[e+1];if(c>h&&i>=c||c>i&&h>=c){var j=a[g];j+(c-h)/(i-h)*(a[e]-j)<b&&(f=!f)}e=g}return f},polygonIntersectsSegment:function(a,b,c,d,e){for(var f=a.length,g=b-d,h=c-e,i=b*e-c*d,j=a[f-2],k=a[f-1],l=0;f>l;l+=2){var m=a[l],n=a[l+1],o=j*n-k*m,p=j-m,q=k-n,r=g*q-h*p,s=(i*p-g*o)/r;if((s>=j&&m>=s||s>=m&&j>=s)&&(s>=b&&d>=s||s>=d&&b>=s)){var t=(i*q-h*o)/r;if((t>=k&&n>=t||t>=n&&k>=t)&&(t>=c&&e>=t||t>=e&&c>=t))return!0}j=m,k=n}return!1},getPolygon:function(a){var b=this.boundingBoxes.indexOf(a);return-1==b?null:this.polygons[b]},getWidth:function(){return this.maxX-this.minX},getHeight:function(){return this.maxY-this.minY}},Array.matrix=function(a,b,c){var d,e,f,g=[];for(e=0;a>e;e+=1){for(d=[],f=0;b>f;f+=1)d[f]=c;g[e]=d}return g},Math.get_distance=function(a,b){return Math.sqrt(Math.pow(b.x-a.x,2)+Math.pow(b.y-a.y,2))},Math.get_angle=function(a,b){return null===a||null===b?0:Math.atan2(b.y-a.y,b.x-a.x)},Math.get_angle_between_vectors=function(a,b){if(null===a||null===b)return 0;var c,d=a.x*b.y-a.y*b.x,e=Math.sqrt(a.x*a.x+a.y*a.y)*Math.sqrt(b.x*b.x+b.y*b.y),f=a.x*b.x+a.y*b.y;(0==e||0==f)&&(c=0);var c=f/e;c=c>1?1:c,c=-1>c?-1:c;var g=Math.acos(c);g=0>d?-g:g;var h=180*g/Math.PI;return 0/0===h?0:h},Math.get_next_point=function(a,b,c){return{x:Math.cos(c*Math.PI/180)*b+a.x,y:Math.sin(c*Math.PI/180)*b+a.y}},Math.is_point_on_segment=function(a,b,c){return((c.y-a.y)*(b.x-a.x)).toFixed(0)===((b.y-a.y)*(c.x-a.x)).toFixed(0)&&(a.x>b.x&&b.x>c.x||a.x<b.x&&b.x<c.x)&&(a.y>=b.y&&b.y>=c.y||a.y<=b.y&&b.y<=c.y)},Math.insertionSort=function(a,b){for(var c,d,e=0;e<a.length;++e){for(d=a[e],c=e-1;c>=0&&b(a[c],d);--c)a[c+1]=a[c];a[c+1]=d}},Math.bubble_sort=function(a,b){var c;do{c=!1;for(var d=0;d<a.length-1;d++)if(b(a[d],a[d+1])){var e=a[d];a[d]=a[d+1],a[d+1]=e,c=!0}}while(c)},String.prototype.hashCode=function(){if(Array.prototype.reduce)return"hash"+this.split("").reduce(function(a,b){return a=(a<<5)-a+b.charCodeAt(0),a&a},0);var a=0;if(0===this.length)return a;for(var b=0;b<this.length;b++){var c=this.charCodeAt(b);a=(a<<5)-a+c,a&=a}return"hash"+a},Math.degrees_to_radians=function(a){return a/180*Math.PI},Math.radians_to_degrees=function(a){return 180*a/Math.PI},Math.random_float=function(a,b){return a+Math.random()*(b-a)},Math.random_int=function(a,b){return Math.floor(a+Math.random()*(b-a+1))},Math.in_range=function(a,b,c){return a>=Math.min(b,c)&&a<=Math.max(b,c)},Math.normalize=function(a,b,c){return(a-b)/(c-b)},Math.lerp=function(a,b,c){return(c-b)*a+b},Math.map=function(a,b,c,d,e){return Math.lerp(Math.normalize(a,b,c),d,e)},Math.clamp=function(a,b,c){return Math.min(Math.max(a,Math.min(b,c)),Math.max(b,c))},Math.round_decimal=function(a,b){var c=Math.pow(10,b);return Math.round(a*c)/c},function(){for(var a=["ms","moz","webkit","o"],b=0;b<a.length&&!window.requestAnimationFrame;++b)window.requestAnimationFrame=window[a[b]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[a[b]+"CancelAnimationFrame"]||window[a[b]+"CancelRequestAnimationFrame"];
window.requestAnimationFrame||(window.requestAnimationFrame=function(a){var b=(new Date).getTime(),c=Math.max(16,33-(b-Ticker.time)),d=window.setTimeout(function(){a(b+c)},c);return d}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)})}(),function(a){function b(){throw"can not initialize"}b.is_started=!1,b.timeout_id=null,b.listeners=[],b.interval=0,b.fps=30,b.calculated_fps=1,b.ticks=0,b.started_at=0,b.delta=1,b.time=0,b.step=33,b.add_listener=function(a){b.listeners.push(a)},b.remove_listener=function(a){var c=b.listeners.indexOf(a);-1!==c&&b.listeners.splice(c,1)},b.remove_all_listeners=function(){b.listeners=[]},b.start=function(){b.is_started||(b.time=b.started_at=(new Date).getTime(),b.is_started=!0,cancelAnimationFrame(b.timeout_id),b.tick(b.started_at))},b.stop=function(){b.is_started=!1,cancelAnimationFrame(b.timeout_id)},b.set_fps=function(a){b.fps=a,b.interval=1e3/a||0},b.recalculate_movement=function(a){return a*b.step*(b.fps/1e3)},b.tick=function(){if(b.timeout_id=requestAnimationFrame(b.tick),b.is_started){var a=(new Date).getTime(),c=a-b.time;b.step=c>b.interval?b.interval:c,b.time=a,b.ticks++,a-b.started_at>1e3&&(b.calculated_fps=b.ticks,b.started_at=a,b.ticks=0);for(var d=b.listeners.length;d--;)b.listeners[d].tick()}},a.Ticker=b}(window),function(a){function b(){throw"Can't initialize images"}a.Images=b}(window),function(a){function b(){throw"cant initialize sounds"}a.Sounds=b}(window);var ContentManager=function(){throw"cant initialize"};ContentManager.stage=null,ContentManager.callback=function(){},ContentManager.loaded_resources=0,ContentManager.count_resources=0,ContentManager.sounds_to_load=[],ContentManager.files_to_load=[],ContentManager.images_to_load=[],ContentManager.atlases=[],ContentManager.skeletons=[],ContentManager.failed_attempts=[],ContentManager.number_of_failed_attepts=5,ContentManager.failed_attempts_delay=1e3,ContentManager.add_image=function(a,b){var c=Images[a];if(void 0!==c)throw"the name of the image: '"+b+"' already exists , please change the key name for that image - iko";if(c=ContentManager.images_to_load[a],void 0!==c)throw"the name of the image: '"+b+"' already exists , please change the key name for that image - iko";ContentManager.images_to_load[a]={image:new Image,url:b,image_name:a},ContentManager.count_resources++},ContentManager.add_sound=function(a,b){var c=ContentManager.sounds_to_load.indexOf(a);if(-1!==c)throw"the name of the sound: '"+b+"' already exists";ContentManager.sounds_to_load[a]=b,ContentManager.count_resources++},ContentManager.add_audio=function(a,b){var c=new Howl({urls:[b+".mp3",b+".wav"],onload:function(){},onloaderror:function(){}});Sounds[a]=c},ContentManager.download_resources=function(a,b,c){ContentManager.callback=b||function(){},ContentManager.stage=a,ContentManager.base_url=c;for(var d in ContentManager.sounds_to_load){var e=new Howl({urls:[ContentManager.sounds_to_load[d]+".mp3",ContentManager.sounds_to_load[d]+".wav"],onload:ContentManager.resource_loaded,onloaderror:function(){ContentManager.handle_sound_error(d,ContentManager.sounds_to_load[d])}});Sounds[d]=e}for(var f in ContentManager.images_to_load)ContentManager.images_to_load[f].image.onload=ContentManager.resource_loaded,ContentManager.images_to_load[f].image.onerror=function(){var a=(ContentManager.base_url?ContentManager.base_url:"")+ContentManager.images_to_load[f].url;ContentManager.handle_image_error(f,a)},ContentManager.images_to_load[f].image.src=(ContentManager.base_url?ContentManager.base_url:"")+ContentManager.images_to_load[f].url;for(var g=0;g<this.files_to_load.length;g++){var h=this.files_to_load[g];ContentManager.download_file(h._filename,h._success,h._fail)}},ContentManager.handle_image_error=function(a,b){ContentManager.set_failed(b)?setTimeout(function(){ContentManager.images_to_load[a].image.src=b},ContentManager.failed_attempts_delay):log("FAILED: image with index name: "+a+" url: "+b)},ContentManager.handle_sound_error=function(a,b){ContentManager.set_failed(b)?setTimeout(function(){var b=new Howl({urls:[ContentManager.sounds_to_load[a]+".mp3",ContentManager.sounds_to_load[a]+".wav"],onload:ContentManager.resource_loaded,onloaderror:function(){ContentManager.handle_sound_error(a,ContentManager.sounds_to_load[a])}});Sounds[a]=b},ContentManager.failed_attempts_delay):log("sound index name: "+a+" url: "+b)},ContentManager.resource_loaded=function(){if(ContentManager.loaded_resources++,ContentManager.loaded_resources===ContentManager.count_resources){ContentManager.base_url=null,ContentManager.loaded_resources=0,ContentManager.count_resources=0;for(var a in ContentManager.images_to_load)Images[a]=ContentManager.images_to_load[a];ContentManager.images_to_load=[],ContentManager.sounds_to_load=[],ContentManager.files_to_load=[],ContentManager.callback()}},ContentManager.ajaxRequest=function(){var a=["Msxml2.XMLHTTP","Microsoft.XMLHTTP"];if(!window.ActiveXObject)return window.XMLHttpRequest?new XMLHttpRequest:!1;for(var b=0;b<a.length;b++)try{return new ActiveXObject(a[b])}catch(c){}},ContentManager.add_spine_animation=function(a){ContentManager.add_image(a,"assets/spine/"+a+".png"),ContentManager.add_image(a+"_fliped","assets/spine/"+a+"_fliped.png"),ContentManager.add_file("assets/spine/"+a+".json",function(b){ContentManager.skeletons[a]=JSON.parse(b)},function(){}),ContentManager.add_file("assets/spine/"+a+".atlas",function(b){ContentManager.atlases[a]=b},function(){})},ContentManager.add_file=function(a,b,c){ContentManager.count_resources++,this.files_to_load.push({_filename:a,_success:b,_fail:c})},ContentManager.download_file=function(a,b,c){var d=new ContentManager.ajaxRequest;d.onreadystatechange=function(){4===d.readyState&&(200===d.status?(b(d.responseText),ContentManager.resource_loaded()):ContentManager.set_failed(a)?setTimeout(function(){ContentManager.download_file(a,b,c)},ContentManager.failed_attempts_delay):c())},d.open("GET",a,!0),d.send(null)},ContentManager.set_failed=function(a){return ContentManager.failed_attempts[a]||(ContentManager.failed_attempts[a]=0),ContentManager.failed_attempts[a]++,ContentManager.failed_attempts[a]>ContentManager.number_of_failed_attepts?(log("resource not found: "+a),!1):!0},function(a){function b(a){this.initialize(a)}b.prototype.initialize=function(b){if(this.tickable_objects=[],this.layers=[],this.non_tickable_objects=[],this.containers=[],this.remove_queue=[],this.is_children_sortable=!0,this.position={x:0,y:0},this.width=Config.screen_width,this.height=Config.screen_height,b)Config.is_mobile?this.context=a.document.getElementById(b).getContext("2d"):(this.context=a.document.getElementById(b).getContext("2d"),this.context.canvas.width=Config.screen_width,this.context.canvas.height=Config.screen_height,this.context.canvas.style.width=Config.screen_width,this.context.canvas.style.height=Config.screen_height);else{var c=a.document.getElementById("stage");if(c.id)this.context=c.getContext("2d"),this.context.canvas.width=Config.screen_width,this.context.canvas.height=Config.screen_height,this.context.canvas.style.width=Config.screen_width,this.context.canvas.style.height=Config.screen_height;else{var c=document.createElement("canvas");c.width=800,c.height=480,this.context=c.getContext("2d")}}},b.prototype.add=function(a){a.parent=this,a.on_added_to_parent(this),this.tickable_objects.push(a)},b.prototype.clear=function(){for(var a=this.tickable_objects.length,b=a-1;b>=0;b--)if(this.tickable_objects[b].is_removable){var c=this.tickable_objects.indexOf(this.tickable_objects[b]);-1!==c&&this.tickable_objects.splice(c,1)}for(var a=this.containers.length,b=a-1;b>=0;b--)if(this.containers[b].is_removable){var c=this.containers.indexOf(this.containers[b]);-1!==c&&this.containers.splice(c,1)}},b.prototype.remove=function(a){this.remove_queue.push(a)},b.prototype.update=function(){this.tick()},b.prototype.draw=function(){this.tick()},b.prototype.tick=function(){this.draw_children(this.tickable_objects,this.context,this)},b.prototype.draw_children=function(a,b,c){c.is_children_sortable&&this.sort_objects(a);for(var d=a.length;d--;){var e=a[d];e.draw(b),this.draw_children(e.get_children(),b,e),e.on_draw_finished(b)}},b.prototype.sort_strategy=function(a,b){return a.z_index<b.z_index},b.prototype.sort_objects=function(a){Math.insertionSort(a,this.sort_strategy)},b.prototype.clear_canvas=function(){this.context.clearRect(0,0,Config.screen_width,Config.screen_height);for(var a=this.remove_queue.length;a--;){var c=this.remove_queue[a];if(c.clear(this.context),c.get_parent()instanceof b){var d=this.tickable_objects.indexOf(c);-1!==d&&(this.tickable_objects.splice(d,1),this.remove_children(c))}else c.remove_from_parent()}this.remove_queue.length=0,this.clear_children(this.tickable_objects,this.context)},b.prototype.clear_children=function(a,b){for(var c=a.length;c--;){var d=a[c];a[c].clear(b),this.clear_children(d.get_children(),b)}},b.prototype.remove_children=function(a){for(var b=a.get_children(),c=b.length;c--;){var d=b[c];d.on_remove_from_parent(a),this.remove_children(d)}},b.prototype.remove_child=function(a){this.remove(a)},b.prototype.get_position=function(){return this.position},b.prototype.debug_grid=function(){if(Config.is_mobile)for(var a=Config.height_in_tiles,b=Config.width_in_tiles,c=Config.tile_width,d=Config.tile_height,e=0;a>e;e++)for(var f=0;b>f;f++)this.context.drawImage(Images.dot.image,e*c,f*d);else{this.context.save(),this.context.fillStyle="#206838",this.context.beginPath(),this.context.rect(0,0,Config.screen_width,Config.screen_height),this.context.fill(),this.context.closePath(),this.context.strokeStyle="#fff",this.context.lineWidth=1,this.context.globalAlpha=.2;var a=Config.height_in_tiles,b=Config.width_in_tiles,c=Config.tile_width,d=Config.tile_height;this.context.beginPath();for(var e=0;b>e;e++)this.context.moveTo(c*e,0),this.context.lineTo(c*e,Config.game_height);for(var e=0;a>e;e++)this.context.moveTo(0,d*e),this.context.lineTo(Config.game_width,d*e);this.context.stroke(),this.context.closePath(),this.context.globalAlpha=1,this.context.restore()}},a.Stage=b}(window),Drawable.prototype.initialize=function(){this.position=new Vector,this.anchor=new Vector,this.translation=new Vector,this.reg=new Vector,this.width=0,this.height=0,this.angle=0,this._angle=0,this.alpha=1,this._alpha=1,this.scale_x=1,this.scale_y=1,this.bounds=new Box(new V,this.width,this.height).toPolygon(),this.is_mouse_down=!1,this.is_selected=!1,this.is_visible=!0,this.tag=0,this.z_index=1,this.priority=0,this.parent=null,this.children=[],this.is_children_sortable=!0},Drawable.draw_polygon=function(a,b){var c=a.points,d=a.pos;b.beginPath();for(var e=0;e<c.length;e++){if(e===c.length-1)var f=c[0].clone(),g=c[e].clone();else var f=c[e].clone(),g=c[e+1].clone();f.add(d),g.add(d),b.moveTo(f.x,f.y),b.lineTo(g.x,g.y)}b.closePath(),b.stroke()},Drawable.prototype.set_position=function(a,b){this.position.x=a,this.position.y=b;var c=this.get_absolute_position();c&&(this.set_bounds_position(c),this.iterate_children())},Drawable.prototype.set_anchor=function(a,b){this.anchor.x=a,this.anchor.y=b,this.translate_bounds_to(a*this.width,b*this.height)},Drawable.prototype.translate_bounds_to=function(a,b){this.reg.x=a,this.reg.y=b;var c=new Vector;c.x=this.translation.x-this.reg.x,c.y=this.translation.y-this.reg.y,c.rotate(this.angle),this.bounds.translate(c.x,c.y),this.translation.x=this.reg.x,this.translation.y=this.reg.y},Drawable.prototype.rotate_to=function(a){var b=a-this.angle;this.angle=a,this._angle=a,this.bounds.rotate(b)},Drawable.prototype.rotate=function(a){this.angle+=a,this.bounds.rotate(a)},Drawable.prototype.set_alpha=function(a){this.alpha=a},Drawable.prototype.set_scale=function(a){this.scale_x=a,this.scale_y=a},Drawable.prototype.set_scale_x=function(a){this.scale_x=a},Drawable.prototype.set_scale_y=function(a){this.scale_y=a},Drawable.prototype.add_child=function(a){if(!a)throw"Can't add empty child";a.parent=this,a.on_added_to_parent(this),this.children.push(a);var b=a.get_absolute_position();a.set_bounds_position(b),a.iterate_children()},Drawable.prototype.remove_child=function(a){var b=this.children.indexOf(a);-1!==b&&(a.on_remove_from_parent(this),this.children.splice(b,1),this.dispatch_on_remove_children(a))},Drawable.prototype.dispatch_on_remove_children=function(a){for(var b=a.get_children(),c=b.length;c--;){var d=b[c];d.on_remove_from_parent(a),d.dispatch_on_remove_children(d)}},Drawable.prototype.get_children=function(){return this.children},Drawable.prototype.get_parent=function(){return this.parent},Drawable.prototype.remove_from_parent=function(){var a=this.get_parent();a&&this.get_parent().remove_child(this)},Drawable.prototype.on_added_to_parent=function(){},Drawable.prototype.on_remove_from_parent=function(){},Drawable.prototype.iterate_children=function(){for(var a=this.get_children(),b=a.length,c=0;b>c;c++){var d=a[c],e=d.get_absolute_position();d.set_bounds_position(e),d.iterate_children()}},Drawable.prototype.get_anchor=function(){return this.anchor},Drawable.prototype.get_position=function(){return this.position.clone()},Drawable.prototype.get_absolute_position=function(){return this.parent?this.iterate_parents(this.parent):this.get_position()},Drawable.prototype.to_relative_position=function(a){return a.clone().sub(this.bounds.pos)},Drawable.prototype.iterate_parents=function(a){var b=a.parent;if(b){var c=a.get_position(),d=this.iterate_parents(b);return c.clone().add(d)}return this.position},Drawable.prototype.on_mouse_down=function(){},Drawable.prototype.on_mouse_up=function(){},Drawable.prototype.on_mouse_move=function(){},Drawable.prototype.on_mouse_cancel=function(){},Drawable.prototype.on_right_mouse_down=function(){},Drawable.prototype.on_right_mouse_up=function(){},Drawable.prototype.on_right_mouse_move=function(){},Drawable.prototype.resign_event_to_parent=function(a,b){this.is_mouse_down=!1;var c=this.get_parent();c?(c.is_mouse_down=!0,"on_mouse_down"===b?c.on_mouse_down(a):"on_mouse_move"===b?c.on_mouse_move(a):"on_mouse_up"===b&&c.on_mouse_up(a)):log("no parent found to resign the event")},Drawable.prototype.recalculate_bounds=function(){this.bounds=new Box((new V).copy(this.bounds.pos),this.width,this.height).toPolygon(),this.set_anchor(this.anchor.x,this.anchor.y),this.rotate_to(this.angle)},Drawable.prototype.set_bounds_position=function(a){this.bounds.pos.x=a.x,this.bounds.pos.y=a.y},Drawable.prototype.set_size=function(a,b){this.width=a,this.height=b,this.recalculate_bounds()},Drawable.prototype.check=function(a){return SAT.pointInPolygon(a,this.bounds)},Drawable.prototype.draw=function(){throw"you must implment draw method for drawable"},Drawable.prototype.update=function(){},Drawable.prototype.debug_bounds=function(a){if(!Config.is_mobile){var b=this.bounds.points,c=a.fillStyle,d=this.bounds.pos;a.fillStyle="yellow",a.beginPath(),a.arc(d.x,d.y,2,0,2*Math.PI),a.fill(),a.closePath(),a.fillStyle=c,a.beginPath();var e=!0;for(var f in b){var g=b[f].clone();g.add(d),e?(e=!1,a.moveTo(g.x,g.y)):a.lineTo(g.x,g.y)}var g=b[0].clone();g.add(d),a.lineTo(g.x,g.y),a.stroke(),a.closePath()}},Drawable.prototype.on_draw_finished=function(){},Drawable.prototype.clear=function(){throw"you must implment clear from canvas method for drawable"},Drawable.prototype.on_state=function(){},function(a){function b(){this.initialize()}b.prototype=new Drawable,b.prototype.drawable_initialize=b.prototype.initialize,b.prototype.initialize=function(){this.drawable_initialize(),this.set_size(Config.screen_width,Config.screen_height)},b.prototype.show=function(){game.stage.add(this)},b.prototype.hide=function(){this.remove_from_parent()},b.prototype.draw=function(a){this._alpha=a.globalAlpha,1!==this.alpha&&(a.globalAlpha=a.globalAlpha*this.alpha)},b.prototype.on_draw_finished=function(a){a.globalAlpha=this._alpha},b.prototype.clear=function(){},b.prototype.update=function(){},b.prototype.update_children=function(a){for(var b=a.length,c=Ticker.step*Config.slow_motion_factor;b--;){var d=a[b];d.update(c),this.update_children(d.get_children())}},a.Screen=b}(window),SpriteSheet.prototype.initialize=function(a){this._animations=[],this._frames=[],this._images=[],this._regs=[];for(var b=0;b<a.length;b++){var c=a[b];this._animations.push(c.animations),this._frames.push(c.frames),this._images.push(c.image.image),this._regs.push(c.reg)}},Sprite.prototype=new Drawable,Sprite.prototype.drawable_initialize=Sprite.prototype.initialize,Sprite.prototype.initialize=function(a){this.drawable_initialize(),this.image_name=a,this.image=Images[a].image,this.set_size(this.image.width,this.image.height)},Sprite.prototype.on_added_to_parent=function(a){Drawable.prototype.on_added_to_parent.call(this,a)},Sprite.prototype.on_remove_from_parent=function(a){Drawable.prototype.on_remove_from_parent.call(this,a)},Sprite.prototype.on_draw=function(){},Sprite.prototype.draw=function(a){var b=this.width,c=this.height,d=this.bounds.pos,e=this.get_anchor(),f=SAT.pool.get();if(f.x=this.bounds.pos.x+-b*e.x,f.y=this.bounds.pos.y+-c*e.y,this.is_visible){this._alpha=a.globalAlpha,0!==this.angle&&(a.save(),a.translate(Math.round(d.x),Math.round(d.y)),a.rotate(this.angle),f.x=-b*e.x,f.y=-c*e.y),1!==this.alpha&&(a.globalAlpha=a.globalAlpha*this.alpha);var g=this.width*this.scale_x,h=this.height*this.scale_y;a.drawImage(this.image,0,0,this.width,this.height,Math.round_decimal(f.x-e.x*(g-this.width),2),Math.round_decimal(f.y-e.y*(h-this.height),2),g,h),this.on_draw(a),0!==this.angle&&a.restore()}Config.debug&&this.debug_bounds(a)},Sprite.prototype.on_draw_finished=function(a){a.globalAlpha=this._alpha},Sprite.prototype.clear=function(){},window.Sprite=Sprite,Animation.prototype=new Drawable,Animation.prototype.drawable_initialize=Animation.prototype.initialize,Animation.prototype.initialize=function(a){if(this.drawable_initialize(),this.animation_index=0,this.is_animation_stopped=!1,a){if(this.position=new Vector,this.current_frame=0,this.time_elapsed=0,this.current_animation=null,this.current_animation_name="",this.ticked=0,this.backround_offset_x=0,this.backround_offset_y=0,this.is_removable=!0,this.is_visible=!0,this.image=a._images[0],this.frames=a._frames[0],this.width=this.frame_width=Math.floor(this.image.width/this.frames.x),this.height=this.frame_height=Math.floor(this.image.height/this.frames.y),a._regs[0])var b=a._regs[0];else var b={x:0,y:0,width:1,height:1};this.set_size(this.width*b.width,this.height*b.height),this.set_anchor(b.x,b.y),this.sprite_sheet=a,this.has_ended=!1,this.lock_callback=!1}},Animation.prototype.on_frame=function(){},Animation.prototype.play=function(a,b){this.is_animation_stopped=!1;var c=this.sprite_sheet._animations,d=c.length;this.current_animation_name=a;for(var e=0;d>e;e++){var f=c[e];if(this.animation_index=0,f[a]){this.current_animation=f[a],this.image=this.sprite_sheet._images[e],this.frames=this.sprite_sheet._frames[e],this.frame_width=Math.floor(this.image.width/this.frames.x),this.frame_height=Math.floor(this.image.height/this.frames.y);break}}this.time_elapsed=b||this.time_elapsed>this.current_animation.duration?0:this.time_elapsed,this.set_frame(this.get_current_frame()),this.ticked=0,this.has_ended=!1,this.lock_callback=!1},Animation.prototype.stop=function(){this.is_animation_stopped=!0},Animation.prototype.get_current_frame=function(){var a=this.time_elapsed/this.current_animation.duration;return a=1>a?a:.99,this.current_animation.start+Math.floor((this.current_animation.end-this.current_animation.start+1)*a)},Animation.prototype.set_frame=function(a){a!==this.current_frame&&(this.current_frame=a,this.on_frame(this.current_frame,this.current_animation_name))},Animation.prototype.advance=function(a){this.time_elapsed+=a;var b=this.frames.x,c=this.current_frame;this.backround_offset_x=c%b|0,this.backround_offset_y=c/b|0,this.time_elapsed>=this.current_animation.duration?this.current_animation.loop?this.time_elapsed-=this.current_animation.duration:(this.set_frame(this.current_animation.end),this.has_ended||(this.has_ended=!0)):this.set_frame(this.get_current_frame())},Animation.prototype.on_draw=function(){},Animation.prototype.draw=function(a){var b=this.frame_width,c=this.frame_height,d=this.bounds.pos,e=this.get_anchor(),f=SAT.pool.get();if(f.x=this.bounds.pos.x+-b*e.x,f.y=this.bounds.pos.y+-c*e.y,this.is_visible){this._alpha=a.globalAlpha,0!==this.angle&&(a.save(),a.translate(d.x,d.y),a.rotate(this.angle),f.x=-b*e.x,f.y=-c*e.y),1!==this.alpha&&(a.globalAlpha=a.globalAlpha*this.alpha);var g=b*this.scale_x,h=c*this.scale_y;a.drawImage(this.image,Math.round_decimal(this.backround_offset_x*b,2),Math.round_decimal(this.backround_offset_y*c,2),b,c,Math.round_decimal(f.x-e.x*(g-b),2),Math.round_decimal(f.y-e.y*(h-c),2),g,h),this.on_draw(a),0!==this.angle&&a.restore()}Config.debug&&this.debug_bounds(a),!this.lock_callback&&this.has_ended&&(this.current_animation.callback&&this.current_animation.callback(),this.lock_callback=!0)},Animation.prototype.on_draw_finished=function(a){a.globalAlpha=this._alpha},Animation.prototype.clear=function(){},Animation.prototype.update=function(a){this.is_animation_stopped||this.advance(a)},SpineAnimation.prototype=new Drawable,SpineAnimation.prototype.drawable_initialize=SpineAnimation.prototype.initialize,SpineAnimation.prototype.initialize=function(a){if(this.drawable_initialize(),this.skeleton_name=a,void 0===Images[this.skeleton_name])throw"there is no such animation named: "+this.skeleton_name;this.image=Images[this.skeleton_name].image,this.set_size(this.image.width,this.image.height),this.atlas=new spine.Atlas(ContentManager.atlases[this.skeleton_name],{load:function(){},unload:function(a){a.destroy()}}),spine.Bone.yDown=!0;var b=new spine.SkeletonJson(new spine.AtlasAttachmentLoader(this.atlas));this.skeletonData=b.readSkeletonData(ContentManager.skeletons[this.skeleton_name]),this.skeleton=new spine.Skeleton(this.skeletonData),this.skeleton.x=0,this.skeleton.y=0,this.skeleton.updateWorldTransform(),this.skeleton.data.skins.length>0&&this.skeleton.setSkin(this.skeleton.data.skins[0]);var c=new spine.AnimationStateData(this.skeletonData);this.state=new spine.AnimationState(c),this.state.onEvent=this.on_spine_event,this.current_animation="",this.current_loop=!0,this.current_flipped=!1,this.callback=function(){}},SpineAnimation.prototype.on_spine_event=function(){},SpineAnimation.prototype.set_skin=function(a){this.skeleton.skin=null,this.skeleton.setSlotsToSetupPose(),this.skeleton.setSkinByName(a)},SpineAnimation.prototype.update_image=function(a,b){this.skeleton.setAttachment(a,b)},SpineAnimation.prototype.stop=function(){this.current_animation="",this.callback()},SpineAnimation.prototype.play=function(a,b,c,d){var e=this;this.current_animation=a,this.current_loop=b,this.current_flipped=c,this.callback=d||function(){},b=b||!0,c=c||!1,this.skeleton.setBonesToSetupPose(),this.state.setAnimationByName(0,a,b),this.skeleton.flipX=c,this.image=c?Images[this.skeleton_name+"_fliped"].image:Images[this.skeleton_name].image,d&&(this.state.onComplete=function(){e.callback(),e.state.onComplete=null}),this.set_scale(this.scale_x),this.state.apply(this.skeleton),this.skeleton.updateWorldTransform()},SpineAnimation.prototype.set_position=function(a,b){Drawable.prototype.set_position.call(this,a,b),this.skeleton.x=this.bounds.pos.x,this.skeleton.y=this.bounds.pos.y},SpineAnimation.prototype.set_bounds_position=function(a,b){Drawable.prototype.set_bounds_position.call(this,a,b),this.skeleton.x=this.bounds.pos.x,this.skeleton.y=this.bounds.pos.y},SpineAnimation.prototype.set_scale=function(a){Drawable.prototype.set_scale.call(this,a);var b=this.skeleton.getRootBone();b.scaleX=a,b.scaleY=a},SpineAnimation.prototype.on_added_to_parent=function(a){Drawable.prototype.on_added_to_parent.call(this,a)},SpineAnimation.prototype.on_remove_from_parent=function(a){Drawable.prototype.on_remove_from_parent.call(this,a)},SpineAnimation.prototype.draw=function(a){for(var b=this.skeleton.drawOrder,c=[],d=0,e=b.length;e>d;d++){var f=b[d],g=f.attachment;if(g instanceof spine.RegionAttachment){g.computeVertices(this.skeleton.x,this.skeleton.y,f.bone,c);var h=SAT.pool.get();h.x=c[2],h.y=c[3];var i=SAT.pool.get();i.x=c[4],i.y=c[5],this.skeleton.flipX&&(h.x=c[4],h.y=c[5],i.x=c[2],i.y=c[3]);var j=Math.get_angle(h,i);Config.debug&&(a.fillStyle="#f00",a.beginPath(),a.moveTo(c[0],c[1]),a.lineTo(c[2],c[3]),a.lineTo(c[4],c[5]),a.lineTo(c[6],c[7]),a.closePath(),a.stroke()),this.draw_fragment(a,f,h,j)}}Config.debug&&this.debug_bounds(a)},SpineAnimation.prototype.update=function(a){this.state.update(a/1e3),this.state.apply(this.skeleton),this.skeleton.updateWorldTransform()},SpineAnimation.prototype.draw_fragment=function(a,b,c,d){var e=b.attachment.width,f=b.attachment.height,g=b.bone.scaleX,h=b.bone.scaleY,i=SAT.pool.get();i.x=e/2,i.y=f/2,i.rotate(d),c.add(i);var j=c,k=c.clone();if(this.is_visible){this._alpha=a.globalAlpha,a.save(),j.sub(i),a.translate(j.x,j.y),a.rotate(d),k.x=0,k.y=0,1!==b.a&&(a.globalAlpha=a.globalAlpha*b.a);var l=e*this.scale_x*g,m=f*this.scale_y*h;b.attachment.rendererObject;var n=b.attachment.rendererObject.x,o=b.attachment.rendererObject.y;this.skeleton.flipX&&(n=this.image.width-n-e),a.drawImage(this.image,n,o,e,f,k.x,k.y,l,m),a.restore()}},SpineAnimation.prototype.on_draw_finished=function(a){a.globalAlpha=this._alpha},SpineAnimation.prototype.clear=function(){},window.SpineAnimation=SpineAnimation,Emitter.prototype.initialize=function(a,b,c,d){this.emission_point=a,this.layer=b,this.particle_type=c,this.frequency=d,this.time_passed=0,this.particles=[],this.particles_count=0,this.free_particles=[]},Emitter.prototype.get_particle=function(){if(0===this.free_particles.length){var a=new this.particle_type;a.emitter=this,this.particles.push(a),this.free_particles.push(a)}return this.free_particles.pop()},Emitter.prototype.recycle_particle=function(a){this.free_particles.push(a),a.remove_from_parent()},Emitter.prototype.start=function(){Actions.add(this)},Emitter.prototype.run=function(){Actions.add(this)},Emitter.prototype.stop=function(){Actions.remove(this)},Emitter.prototype.step=function(a){this.time_passed+=a;var b=Math.round(this.time_passed*this.frequency),c=b-this.particles_count;this.particles_count=b;for(var d=0;c>d;d++){var e=this.get_particle();if(e.reset(),e.set_position(this.emission_point.x,this.emission_point.y),!this.layer)throw"Please set the layer for the particle engine,better do that in the 'on_added_to_parent()' method";this.layer.add_child(e)}},Event.prototype.initialize=function(){this.propagate=!0,this.point={x:0,y:0}},Event.prototype.stop_propagation=function(){this.propagate=!1},Input.prototype.initialize=function(){this.point={x:!1,y:!1},this.tmp_point={x:!1,y:!1},this.prev_point_type=-1,this.type=0,this.elements=[]},Input.prototype.add_listener=function(a){var b=window.document.getElementById(a),c=this;return b.id?(b.addEventListener("mouseup",function(a){c.fixWhich(a);var b=0,d=0;a||(a=window.event),a.pageX||a.pageY?(b=a.offsetX?a.offsetX:a.layerX,d=a.offsetY?a.offsetY:a.layerY):(a.clientX||a.clientY)&&(b=a.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,d=a.clientY+document.body.scrollTop+document.documentElement.scrollTop),1===a.which?c.set_mouse_up(b,d):c.set_right_mouse_up(b,d)},!1),b.addEventListener("mousedown",function(a){c.fixWhich(a);var b=0,d=0;a||(a=window.event),a.pageX||a.pageY?(b=a.offsetX?a.offsetX:a.layerX,d=a.offsetY?a.offsetY:a.layerY):(a.clientX||a.clientY)&&(b=a.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,d=a.clientY+document.body.scrollTop+document.documentElement.scrollTop),1===a.which?c.set_mouse_down(b,d):c.set_right_mouse_down(b,d)},!1),b.addEventListener("mousemove",function(a){c.fixWhich(a);var b=0,d=0;a||(a=window.event),a.pageX||a.pageY?(b=a.offsetX?a.offsetX:a.layerX,d=a.offsetY?a.offsetY:a.layerY):(a.clientX||a.clientY)&&(b=a.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,d=a.clientY+document.body.scrollTop+document.documentElement.scrollTop),1===a.which?c.set_mouse_move(b,d):c.set_right_mouse_move(b,d)},!1),void b.addEventListener("contextmenu",function(a){a.preventDefault()})):(window.addEventListener("touchmove",function(a){c.set_mouse_move(a.pageX,a.pageY)}),window.addEventListener("touchend",function(a){c.set_mouse_up(a.pageX,a.pageY)}),void window.addEventListener("touchstart",function(a){c.set_mouse_down(a.pageX,a.pageY)}))},Input.prototype.fixWhich=function(a){!a.which&&a.button&&(1&a.button?a.which=1:4&a.button?a.which=2:2&a.button&&(a.which=3))},Input.prototype.add=function(a){var b=this.elements.indexOf(a);if(!a)throw"can't add undefined value to Input";-1===b&&this.elements.push(a)},Input.prototype.remove=function(a){var b=this.elements.indexOf(a);-1!==b&&this.elements.splice(b,1)},Input.prototype.remove_all=function(){this.elements=[]},Input.prototype.sort_input=function(){Math.bubble_sort(this.elements,function(a,b){return a.priority>b.priority})},Input.prototype.process_click=function(){this.sort_input();var a=this.point,b=this.type,c=this.elements,d=c.length,e=new Event;if(e.point={x:this.point.x,y:this.point.y},0===b)for(var f=d;f--;){var g=c[f];if(g.check(a)&&(g.is_mouse_down&&g.on_mouse_up(e,g),!e.propagate))return}else if(1===b)for(var f=d;f--;){var g=c[f];if(g.check(a)&&(g.is_mouse_down=!0,g.on_mouse_down(e,g),!e.propagate))return}},Input.prototype.process_right_click=function(){this.sort_input();var a=this.point,b=this.type,c=this.elements,d=c.length,e=new Event;if(e.point={x:this.point.x,y:this.point.y},0===b)for(var f=d;f--;){var g=c[f];if(g.check(a)&&(g.is_mouse_down&&g.on_right_mouse_up(e,g),!e.propagate))return}else if(1===b)for(var f=d;f--;){var g=c[f];if(g.check(a)&&(g.is_mouse_down=!0,g.on_right_mouse_down(e,g),!e.propagate))return}},Input.prototype.process_move=function(){var a=this.elements,b=a.length,c=new Event;c.point={x:this.point.x,y:this.point.y};for(var d=b;d--;){var e=a[d];e.is_mouse_down&&(c.propagate?e.on_mouse_move(c,e):(e.on_mouse_cancel(e),e.is_mouse_down=!1))}},Input.prototype.process_right_move=function(){var a=this.elements,b=a.length,c=new Event;c.point={x:this.point.x,y:this.point.y};for(var d=b;d--;){var e=a[d];e.is_mouse_down&&(c.propagate?e.on_right_mouse_move(c,e):(e.on_mouse_cancel(e),e.is_mouse_down=!1))}},Input.prototype.process_cancel=function(){for(var a=this.elements,b=a.length,c=b;c--;)a[c].is_mouse_down&&(a[c].on_mouse_cancel(a[c]),a[c].is_mouse_down=!1)},Input.prototype.set_mouse_up=function(a,b){this.type=0,this.point.x=a,this.point.y=b,this.process_click(),this.process_cancel()},Input.prototype.set_mouse_down=function(a,b){this.type=1,this.point.x=a,this.point.y=b,this.process_click()},Input.prototype.set_mouse_move=function(a,b){this.type=2,this.point.x=a,this.point.y=b,this.process_move()},Input.prototype.set_right_mouse_up=function(a,b){this.type=0,this.point.x=a,this.point.y=b,this.process_right_click(),this.process_cancel()},Input.prototype.set_right_mouse_down=function(a,b){this.type=1,this.point.x=a,this.point.y=b,this.process_right_click()},Input.prototype.set_right_mouse_move=function(a,b){this.type=2,this.point.x=a,this.point.y=b,this.process_right_move()},Input.prototype.set_mouse_cancel=function(){this.type=-1,this.point.x=!1,this.point.y=!1,this.process_cancel()},StateMachine.prototype.initialize=function(a){this.states=a,this.subscribers=[],this.currentState="",this.initial_state=null,this.indexes={};for(var b=0;b<this.states.length;b++)this.indexes[this.states[b].name]=b,this.states[b].initial&&(this.currentState=this.states[b],this.initial_state=this.currentState);if(!this.initial_state)throw"you must have initial state when configuring a state machine"},StateMachine.prototype.set=function(a,b){if(this.currentState.events[a]){var c=this.currentState;this.currentState=this.states[this.indexes[this.currentState.events[a]]],console.log("going to state: "+this.currentState.name);var d=this.subscribers[this.currentState.name];if(d)for(var e=d.length,f=0;e>f;f++)d[f].on_state(c,this.currentState,b)
}else console.log("state not allowed: "+a)},StateMachine.prototype.get=function(){return this.currentState.name},StateMachine.prototype.reset=function(){this.set(this.initial_state.name),this.subscribers=[]},StateMachine.prototype.subscribe=function(a,b){this.subscribers[a]||(this.subscribers[a]=[]),this.subscribers[a].push(b)},StateMachine.prototype.unsubscribe=function(a,b){var c=this.subscribers[a];if(c){var d=c.indexOf(b);-1!==d&&c.splice(d,1)}},StateMachine.prototype.get_subscribers=function(){return this.subscribers},StateMachine.prototype.unsubscribe_from_all=function(a){for(var b in this.subscribers){var c=this.subscribers[b];if(c){var d=c.indexOf(a);-1!==d&&c.splice(d,1)}}},StateMachine.prototype.unsubscribe_all=function(){this.subscribers=[]},Notes.listeners=[],Notes.add=function(a,b){if(!a.on_note)throw"the object must implement on_note method in order to recive Notes";Notes.listeners[b]||(Notes.listeners[b]=[]),Notes.listeners[b].push(a)},Notes.remove=function(a,b){if(b){var c=Notes.listeners[b];if(c){var d=c.indexOf(a);-1!==d&&c.splice(d,1)}}else for(var e in Notes.listeners){var c=Notes.listeners[e];if(c){var d=c.indexOf(a);-1!==d&&c.splice(d,1)}}},Notes.remove_all=function(){Notes.listeners=[]},Notes.send=function(a,b,c){if(Notes.listeners[a])for(var d=Notes.listeners[a],e=0;e<d.length;e++){var f=d[e];f.on_note(a,b,c)}else log("You are tring to send a message for which there are no subscribers")},function(a){function b(){throw"can't initialize Action"}b.actions=[],b.to_remove=[],b.add=function(a){this.actions.push(a),a.step(0)},b.remove=function(a){this.to_remove.push(a)},b.stop_all=function(){this.actions.length=0},b.run=function(){for(var a=0;a<this.to_remove.length;a++){var b=this.actions.indexOf(this.to_remove[a]);-1!==b&&this.actions.splice(b,1)}this.to_remove.length=0;for(var c=this.actions.length,d=Ticker.step*Config.slow_motion_factor,a=0;c>a;a++)this.actions[a].step(d)},a.Actions=b}(window),Bezier.prototype.initialize=function(a,b,c,d){this.mX1=a,this.mY1=b,this.mX2=c,this.mY2=d},Bezier.prototype.A=function(a,b){return 1-3*b+3*a},Bezier.prototype.B=function(a,b){return 3*b-6*a},Bezier.prototype.C=function(a){return 3*a},Bezier.prototype.GetSlope=function(a,b,c){return 3*this.A(b,c)*a*a+2*this.B(b,c)*a+this.C(b)},Bezier.prototype.CalcBezier=function(a,b,c){return((this.A(b,c)*a+this.B(b,c))*a+this.C(b))*a},Bezier.prototype.get=function(a){return this.mX1===this.mY1&&this.mX2===this.mY2?a:this.CalcBezier(this.GetTForX(a),this.mY1,this.mY2)},Bezier.prototype.GetTForX=function(a){for(var b=a,c=0;4>c;++c){var d=this.GetSlope(b,this.mX1,this.mX2);if(0===d)return b;var e=this.CalcBezier(b,this.mX1,this.mX2)-a;b-=e/d}return b},TweenAlpha.prototype.initialize=function(a,b,c,d,e){this.object=a,this.to=b,this.bezier=c,this.duration=d,this.callback=e||function(){},this.start_alpha=a.alpha,this.difference=b-this.start_alpha,this.time_passed=0},TweenAlpha.prototype.run=function(){Actions.add(this)},TweenAlpha.prototype.stop=function(){Actions.remove(this)},TweenAlpha.prototype.step=function(a){this.time_passed+=a;var b=this.time_passed/this.duration;b=b>=1?1:b;var c=this.bezier?this.bezier.get(b):b;this.object.alpha=this.start_alpha+c*this.difference,1===b&&(this.callback(),Actions.remove(this))},TweenBlink.prototype.initialize=function(a,b,c,d,e){this.object=a,this.to=b,this.bezier=c,this.duration=d,this.callback=e||function(){},this.start_alpha=a.alpha,this.difference=b-this.start_alpha,this.time_passed=0,this.ticks=0},TweenBlink.prototype.run=function(){Actions.add(this)},TweenBlink.prototype.stop=function(){Actions.remove(this)},TweenBlink.prototype.step=function(a){this.time_passed+=a;var b=this.time_passed/this.duration;b=b>=1?1:b;var c=this.bezier?this.bezier.get(b):b;this.object.alpha=this.start_alpha+c*this.difference,1===b&&(this.callback(++this.ticks),this.time_passed-=this.duration,this.ticks%2==0?(this.start_alpha=1,this.difference=this.to-this.start_alpha):(this.start_alpha=this.to,this.difference=1))},TweenMoveTo.prototype.initialize=function(a,b,c,d,e){this.object=a,this.to=b,this.bezier=c,this.duration=d,this.callback=e||function(){},this.start_position=new Vector(a.position.x,a.position.y),this.distance_x=b.x-a.position.x,this.distance_y=b.y-a.position.y,this.time_passed=0},TweenMoveTo.prototype.run=function(){Actions.add(this)},TweenMoveTo.prototype.stop=function(){Actions.remove(this)},TweenMoveTo.prototype.step=function(a){this.time_passed+=a;var b=this.time_passed/this.duration;b=b>=1?1:b;var c=this.bezier?this.bezier.get(b):b;this.object.set_position(this.start_position.x+this.distance_x*c,this.start_position.y+this.distance_y*c),1===b&&(this.callback(),Actions.remove(this))},TweenPulsate.prototype.initialize=function(a,b,c,d,e){this.object=a,this.to=b,this.bezier=c,this.duration=d/2,this.initial_duration=d,this.callback=e||function(){},this.start_scale=a.scale_x,this.difference=b,this.time_passed=0,this.ticks=0},TweenPulsate.prototype.run=function(){Actions.add(this)},TweenPulsate.prototype.stop=function(){Actions.remove(this)},TweenPulsate.prototype.step=function(a){this.time_passed=this.time_passed+a,this.ticks++;var b=this.time_passed/this.duration;b=b>=1?1:b;var c=this.bezier?this.bezier.get(b):b;this.object.set_scale(this.start_scale+c*this.difference),1===b&&this.ticks>1&&(this.callback(this.ticks),this.time_passed-=this.duration,this.duration=this.initial_duration,this.difference=2*this.to*(-1*this.difference/Math.abs(this.difference)),this.start_scale=this.object.scale_x)},TweenRotate.prototype.initialize=function(a,b,c,d,e){this.object=a,this.to=0!==b?b/Math.abs(b):1,this.bezier=c,this.duration=void 0!==d?d:1e3,this.callback=e||function(){},this.start_angle=a.angle,this.time_passed=0,this.ticks=0},TweenRotate.prototype.run=function(){Actions.add(this)},TweenRotate.prototype.stop=function(){Actions.remove(this)},TweenRotate.prototype.step=function(a){this.time_passed+=a;var b=this.time_passed/this.duration;b=b>=1?1:b;var c=this.bezier?this.bezier.get(b):b;this.object.rotate_to(this.start_angle+2*Math.PI*c*this.to),1===b&&(this.object.rotate_to(this.start_angle),this.time_passed-=this.duration,b=this.time_passed/this.duration,b=b>=1?1:b,c=c=this.bezier?this.bezier.get(b):b,this.object.rotate_to(this.start_angle+2*Math.PI*c*this.to),this.callback(++this.ticks))},TweenRotateBy.prototype.initialize=function(a,b,c,d,e){this.object=a,this.by=b,this.bezier=c,this.duration=void 0!==d?d:1e3,this.callback=e||function(){},this.start_angle=a.angle,this.time_passed=0,this.ticks=0},TweenRotateBy.prototype.run=function(){Actions.add(this)},TweenRotateBy.prototype.stop=function(){Actions.remove(this)},TweenRotateBy.prototype.step=function(a){this.time_passed+=a,this.ticks++;var b=this.time_passed/this.duration;b=b>=1?1:b;var c=this.bezier?this.bezier.get(b):b;this.object.rotate_to(this.start_angle+c*this.by),1===b&&this.ticks>1&&(Actions.remove(this),this.callback())},TweenRotateTo.prototype.initialize=function(a,b,c,d,e){this.object=a,this.to=b,this.bezier=c,this.duration=void 0!==d?d:1e3,this.callback=e||function(){},this.start_angle=a.angle,this.diffrenece=b-a.angle,this.time_passed=0,this.ticks=0},TweenRotateTo.prototype.run=function(){Actions.add(this)},TweenRotateTo.prototype.stop=function(){Actions.remove(this)},TweenRotateTo.prototype.step=function(a){this.time_passed+=a,this.ticks++;var b=this.time_passed/this.duration;b=b>=1?1:b;var c=this.bezier?this.bezier.get(b):b;this.object.rotate_to(this.start_angle+c*this.diffrenece),1===b&&this.ticks>1&&(Actions.remove(this),this.callback())},TweenScale.prototype.initialize=function(a,b,c,d,e){this.object=a,this.to=b,this.bezier=c,this.duration=d,this.callback=e||function(){},this.start_scale=a.scale_x,this.difference=b-this.start_scale,this.time_passed=0,this.ticks=0},TweenScale.prototype.run=function(){Actions.add(this)},TweenScale.prototype.stop=function(){Actions.remove(this)},TweenScale.prototype.step=function(a){this.time_passed=this.time_passed+a,this.ticks++;var b=this.time_passed/this.duration;b=b>=1?1:b;var c=this.bezier?this.bezier.get(b):b;this.object.set_scale(this.start_scale+c*this.difference),1===b&&this.ticks>1&&(Actions.remove(this),this.callback())},TweenShake.prototype.initialize=function(a,b,c,d,e,f){this.object=a,this.magnitude=b,this.frequency=c?c:.025,this.bezier=d,this.duration=void 0!==e?e:1e3,this.callback=f||function(){},this.start_point=(new Vector).copy(a.position),this.time_passed=0,this.ticks=0,this.shakes=0},TweenShake.prototype.run=function(){Actions.add(this)},TweenShake.prototype.stop=function(){Actions.remove(this)},TweenShake.prototype.step=function(a){this.time_passed+=a,this.ticks++;var b=this.time_passed/this.duration;b=b>=1?1:b;var c=Math.round(this.frequency*this.time_passed)-this.shakes;if(c>0){this.shakes+=c;var d=this.bezier?this.bezier.get(b):1,e=Math.random_int(0,360),f=SAT.pool.get();f.setLength(this.magnitude*d),f.setAngle(Math.degrees_to_radians(e));var g=this.start_point.clone();g.add(f),this.object.set_position(g.x,g.y)}1===b&&this.ticks>1&&(this.object.set_position(this.start_point.x,this.start_point.y),Actions.remove(this),this.callback())},TweenTime.prototype.initialize=function(a,b,c,d){this.to=a,this.bezier=b,this.duration=c,this.callback=d||function(){},this.start_value=Config.slow_motion_factor,this.difference=a-this.start_value,this.time_passed=0,this.ticks=0},TweenTime.prototype.run=function(){Actions.add(this)},TweenTime.prototype.stop=function(){Actions.remove(this)},TweenTime.prototype.step=function(){this.time_passed=this.time_passed+Ticker.step,this.ticks++;var a=this.time_passed/this.duration;a=a>=1?1:a;var b=this.bezier?this.bezier.get(a):a;Config.slow_motion_factor=this.start_value+b*this.difference,1===a&&this.ticks>1&&(Actions.remove(this),this.callback())},function(a){function b(){this.initialize()}b.prototype.initialize=function(){this.screens=[],this.current_screen=null,this.new_screen=null},b.prototype.just_display_screen=function(a){this.current_screen&&this.current_screen.hide(),this.current_screen=a,this.current_screen.show()},b.prototype.add_callback=function(){game.navigator.current_screen.hide(),game.navigator.current_screen=game.navigator.new_screen,game.navigator.screens.push(game.navigator.current_screen),game.navigator.new_screen=null},b.prototype.go_back_callback=function(){game.navigator.current_screen.hide(),game.navigator.current_screen=game.navigator.new_screen,game.navigator.screens.pop(),game.navigator.new_screen=null},b.prototype.add=function(a,b){if(this.current_screen){this.new_screen=a,this.new_screen.show();var c=null,d=null;if(this.current_screen.z_index=0,this.new_screen.z_index=1,"FADEIN"==b)this.new_screen.set_alpha(0),c=new TweenAlpha(this.current_screen,0,null,200),d=new TweenAlpha(this.new_screen,1,null,200,game.navigator.add_callback);else if("SLIDE"==b)this.new_screen.set_position(Config.screen_width,0),c=new TweenMoveTo(this.current_screen,new Vector(-Config.screen_width,0),null,200),d=new TweenMoveTo(this.new_screen,new Vector(0,0),null,200,game.navigator.add_callback);else{if("SLIDEOVER"!=b)return this.new_screen.set_position(0,0),void game.navigator.add_callback();this.new_screen.set_position(Config.screen_width,0),c=new TweenMoveTo(this.current_screen,new Vector(0,0),null,0),d=new TweenMoveTo(this.new_screen,new Vector(0,0),null,200,game.navigator.add_callback)}c.run(),d.run()}else this.current_screen=a,this.screens.push(a),this.current_screen.show()},b.prototype.go_back=function(a){if(this.screens.length>1){this.new_screen=this.screens[this.screens.length-2],this.new_screen.show();var b=null,c=null;if(this.current_screen.z_index=0,this.current_screen.set_alpha(1),this.new_screen.z_index=1,this.new_screen.set_alpha(1),"FADEIN"==a)this.new_screen.set_alpha(0),b=new TweenAlpha(this.current_screen,0,null,200),c=new TweenAlpha(this.new_screen,1,null,200,this.go_back_callback);else if("SLIDE"==a)this.new_screen.set_position(-Config.screen_width,0),b=new TweenMoveTo(this.current_screen,new Vector(Config.screen_width,0),null,200),c=new TweenMoveTo(this.new_screen,new Vector,null,200,this.go_back_callback);else{if("SLIDEOVER"!=a)return this.go_back_callback(),this.current_screen.set_position(0,0),void this.current_screen.set_alpha(1);this.new_screen.set_position(-Config.screen_width,0),b=new TweenMoveTo(this.current_screen,new Vector(0,0),null,200),c=new TweenMoveTo(this.new_screen,new Vector,null,200,this.go_back_callback)}b.run(),c.run()}else console.log("can't go back , this is as far as it goes")},b.prototype.go_to_root=function(){this.screens.length&&(this.current_screen.hide(),this.current_screen=this.screens[0],this.current_screen.show())},b.prototype.remove_all=function(){for(var a=0;a<this.screens.length;a++)this.screens[a].hide();this.screens=[],this.current_screen=null},b.prototype.update=function(){this.current_screen.update(Ticker.step*Config.slow_motion_factor),this.current_screen.update_children(this.current_screen.get_children()),null!==this.new_screen&&(this.new_screen.update(Ticker.step*Config.slow_motion_factor),this.new_screen.update_children(this.new_screen.get_children()))},a.Navigator=b}(window),Button.prototype=new Drawable,Button.prototype.parent_initialize=Drawable.prototype.initialize,Button.prototype.initialize=function(a){this.parent_initialize(),this.text=null,this.text_color="#000000",this.font_size=14,this.font_family="Verdana",this.image=a.image,this.set_size(this.image.image.width,this.image.image.height),this.priority_listener=10},Button.prototype.draw=function(a){var b=this.bounds.pos.clone(),c=null;c=this.is_mouse_down&&Images[this.image.image_name+"_highlighted"]?Images[this.image.image_name+"_highlighted"]:this.image,a.drawImage(c.image,b.x,b.y),this.text&&(a.font=this.font_size+"px "+this.font_family,a.textAlign="center",a.textBaseline="middle",a.fillStyle=this.text_color,a.fillText(this.text,b.x+this.image.image.width/2,b.y+this.image.image.height/2))},Button.prototype.clear=function(){},Label.prototype=new Drawable,Label.prototype.drawable_initialize=Drawable.prototype.initialize,Label.prototype.initialize=function(){this.drawable_initialize(),this.text="Empty",this.text_color="#000000",this.text_align="left",this.text_vertical_align="top",this.text_size=14,this.text_font_name="Verdana"},Label.prototype.set=function(a){this.text=a.text?a.text:this.text,this.text_color=a.text_color?a.text_color:this.text_color,this.text_align=a.text_align?a.text_align:this.text_align,this.text_vertical_align=a.text_valign?a.text_valign:this.text_vertical_align,this.text_size=a.text_size?a.text_size:this.text_size,this.text_font_name=a.text_font_name?a.text_font_name:this.text_font_name;var b=game.stage.context;b.font=this.text_size+"px "+this.text_font_name,b.textAlign=this.text_align,b.textBaseline=this.text_vertical_align,b.fillStyle=this.text_color;var c=b.measureText(this.text);this.set_size(c.width,this.text_size)},Label.prototype.draw=function(a){var b=this.bounds.pos;this.text&&(a.font=this.text_size+"px "+this.text_font_name,a.textAlign=this.text_align,a.textBaseline=this.text_vertical_align,a.fillStyle=this.text_color,a.fillText(this.text,b.x,b.y))},Label.prototype.clear=function(){},function(a){function b(){this.initialize()}b.prototype=new Drawable,b.prototype.drawable_initialize=b.prototype.initialize,b.prototype.initialize=function(){this.drawable_initialize()},b.prototype.draw=function(){},b.prototype.clear=function(){},a.Layer=b}(window),TableView.prototype=new Drawable,TableView.prototype.drawableInitialize=Drawable.prototype.initialize,TableView.prototype.initialize=function(){this.drawableInitialize(),this.cell_type=TableCell,this.data=[],this.offset_y=0,this.offset_x=0,this.cells=[],this.cells_height=0,this.number_of_cells_visible=0,this.prev_y=0,this.scrolling_speed=0,this.friction=.05,this.prev_frame_y_offset=0,this.is_children_sortable=!1,this.is_scrollable=!0,this.cell_index_selected=void 0,this.tolerance_distance=5,this.tapped_location={x:0,y:0},this.ready_counter=100},TableView.prototype.on_mouse_down=function(a){this.prev_y=a.point.y,this.tapped_location=a.point},TableView.prototype.on_mouse_move=function(a){var b=Math.get_distance(this.tapped_location,a.point),c=this.prev_y-a.point.y;this.prev_y=a.point.y,b>this.tolerance_distance&&this.scroll_y(c)},TableView.prototype.on_added_to_parent=function(a){Drawable.prototype.on_added_to_parent.call(this,a),0===this.cells.length&&this.init_cells(),game.input.add(this)},TableView.prototype.on_remove_from_parent=function(a){Drawable.prototype.on_remove_from_parent.call(this,a),game.input.remove(this)},TableView.prototype.set_cell_type=function(a){this.cell_type=a},TableView.prototype.scroll_y=function(a){return this.is_scrollable?void(this.offset_y+a<0?(this.offset_y=0,this.scrolling_speed=0):this.offset_y+a>=this.data.length*this.cells_height-this.height?(this.offset_y=this.data.length*this.cells_height-this.height,this.scrolling_speed=0):this.offset_y+=a):(this.offset_y=0,!0)},TableView.prototype.init_cells=function(){if(this.width<=0||this.height<=0)throw"framework: table must have visible size";if(!this.data.length)throw"framework: table must have data";for(var a=0;a<this.cells.length;a++)this.cells[a].remove_from_parent();this.cells=[];var b=new this.cell_type;this.cells_height=b.height,this.cells_height*this.data.length<=this.height?(this.number_of_cells_visible=this.data.length,this.is_scrollable=!1):this.number_of_cells_visible=Math.ceil(this.height/this.cells_height)+1;for(var a=0;a<this.number_of_cells_visible;a++){var c=new this.cell_type;c.set_size({width:this.width,height:this.cells_height}),this.cells.push(c),this.add_child(c)}},TableView.prototype.set_data=function(a){this.data=a},TableView.prototype.get_first_visible_cell_index=function(){return Math.floor(this.offset_y/this.cells_height)},TableView.prototype.stop_scrolling=function(){this.ready_counter=0,this.scrolling_speed=0,this.prev_frame_y_offset=this.offset_y},TableView.prototype.draw=function(a){if(this.data.length){var b=this.offset_y-this.prev_frame_y_offset;0!==b&&(this.scrolling_speed=(this.scrolling_speed+b/Ticker.step)/2),this.scrolling_speed>.02||this.scrolling_speed<-.02?(this.is_mouse_down||this.scroll_y(this.scrolling_speed*Ticker.step),this.scrolling_speed=this.scrolling_speed-this.scrolling_speed*this.friction):this.scrolling_speed<.02&&this.scrolling_speed>-.02&&(this.scrolling_speed=0),this.prev_frame_y_offset=this.offset_y;for(var c=Math.floor(this.offset_y/this.cells_height),d=this.offset_y%this.cells_height,e=0,f=c;f<c+this.number_of_cells_visible;f++){var g=this.cells[e];if(g.index=f,g.set_position({x:0,y:e*this.cells_height-d}),f===this.data.length)break;g.is_selected=!1,g.index===this.cell_index_selected&&(g.is_selected=!0),g.bind_data(this.data[f]),e++}a.save(),a.beginPath(),a.strokeStyle="#77bb23";var h=this.bounds;a.rect(h.position.x,h.position.y,h.width,h.height),a.stroke(),a.clip(),a.closePath()}},TableView.prototype.on_draw_finished=function(a){a.restore()},TableView.prototype.on_cell_selected=function(a){this.cell_index_selected=a.index},TableView.prototype.clear=function(){},TableCell.prototype=new Drawable,TableCell.prototype.drawableInitialize=Drawable.prototype.initialize,TableCell.prototype.initialize=function(){this.drawableInitialize(),this.height=100,this.index=0,this.is_selected=!1,this.tapped_location={x:0,y:0}},TableCell.prototype.on_mouse_move=function(a){var b=Math.get_distance(this.tapped_location,a.point);b>this.get_parent().tolerance_distance&&this.resign_event_to_parent(a,"on_mouse_down")},TableCell.prototype.on_mouse_down=function(a){var b=this.get_parent();this.tapped_location=a.point,0!=b.scrolling_speed&&(b.stop_scrolling(),this.resign_event_to_parent(a,"on_mouse_down"))},TableCell.prototype.on_mouse_up=function(a){var b=this.get_parent();0!=b.scrolling_speed?b.stop_scrolling():b.on_cell_selected(this,a)},TableCell.prototype.on_added_to_parent=function(){Drawable.prototype.on_added_to_parent.call(this),game.input.add(this)},TableCell.prototype.on_remove_from_parent=function(){Drawable.prototype.on_remove_from_parent.call(this),game.input.remove(this)},TableCell.prototype.draw=function(){throw"cell should implement its own draw method"},TableCell.prototype.clear=function(){throw"cell should implement its own clear method"},TableCell.prototype.bind_data=function(){throw"cell should implement its own bind data method"};